
  
    
    

  

  
    

<!Doctype html>
<html id="docs" class="About">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="/images/favicon.png">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto+Mono">
    <link rel="stylesheet" type="text/css" href="/css/styles.css"><!-- default styles.css on -->
    <link rel="stylesheet" type="text/css" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css">
    <link rel="stylesheet" type="text/css" href="/css/callouts.css">
    <link rel="stylesheet" type="text/css" href="/css/custom-jekyll/tags.css">
    
    
    <!-- no custom css detected -->

    
    <meta name="description" content="为Kubernetes API生成参考文档" />
    

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js"></script>
    <script src="/js/script.js"></script>
    <script src="/js/custom-jekyll/tags.js"></script>
    <!-- no custom js detected -->
    <!-- Begin Jekyll SEO tag v2.4.0 -->
<title>为Kubernetes API生成参考文档 | Kubernetes</title>
<meta name="generator" content="Jekyll v3.6.0" />
<meta property="og:title" content="为Kubernetes API生成参考文档" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Production-Grade Container Orchestration" />
<meta property="og:description" content="Production-Grade Container Orchestration" />
<link rel="canonical" href="http://0.0.0.0:4000/docs/home/contribute/generated-reference/kubernetes-api/" />
<meta property="og:url" content="http://0.0.0.0:4000/docs/home/contribute/generated-reference/kubernetes-api/" />
<meta property="og:site_name" content="Kubernetes" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@kubernetesio" />
<script type="application/ld+json">
{"description":"Production-Grade Container Orchestration","@type":"WebPage","url":"http://0.0.0.0:4000/docs/home/contribute/generated-reference/kubernetes-api/","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://0.0.0.0:4000/images/favicon.png"}},"headline":"为Kubernetes API生成参考文档","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>


<body>

<div id="cellophane" onclick="kub.toggleMenu()"></div>

<header>
    <a href="/" class="logo"></a>

    <div class="nav-buttons" data-auto-burger="primary">
        <ul class="global-nav">
            <li><a href="/docs/home/">Documentation</a></li>
            <li><a href="http://blog.kubernetes.io/">Blog</a></li>
            <li><a href="/partners/">Partners</a></li>
            <li><a href="/community/">Community</a></li>
            <li><a href="/case-studies/">Case Studies</a></li>
            <li>
                <a href="#">
                    v1.9 <span class="ui-icon ui-icon-carat-1-s"></span>
                </a>
                <ul>
                
                    
                    <li><a href="https://kubernetes.io/docs/home/contribute/generated-reference/kubernetes-api/">v1.9</a></li>
                    
                
                    
                    <li><a href="https://v1-8.docs.kubernetes.io/docs/home/contribute/generated-reference/kubernetes-api/">v1.8</a></li>
                    
                
                    
                    <li><a href="https://v1-7.docs.kubernetes.io/docs/home/contribute/generated-reference/kubernetes-api/">v1.7</a></li>
                    
                
                    
                    <li><a href="https://v1-6.docs.kubernetes.io/docs/home/contribute/generated-reference/kubernetes-api/">v1.6</a></li>
                    
                
                    
                    <li><a href="https://v1-5.docs.kubernetes.io/docs/home/contribute/generated-reference/kubernetes-api/">v1.5</a></li>
                    
                
                </ul>
            </li>
        </ul>
        <!-- <a href="/docs/home" class="button" id="viewDocs" data-auto-burger-exclude>View Documentation</a> -->
        <a href="/docs/tutorials/kubernetes-basics/" class="button" id="tryKubernetes" data-auto-burger-exclude>Try Kubernetes</a>
        <button id="hamburger" onclick="kub.toggleMenu()" data-auto-burger-exclude><div></div></button>
    </div>

    <nav id="mainNav">
        <main data-auto-burger="primary">
        <div class="nav-box">
            <h3><a href="/docs/tutorials/stateless-application/hello-minikube/">Get Started</a></h3>
            <p>Ready to get your hands dirty? Build a simple Kubernetes cluster that runs "Hello World" for Node.js.</p>
        </div>
        <div class="nav-box">
            <h3><a href="/docs/home/">Documentation</a></h3>
            <p>Learn how to use Kubernetes with the use of walkthroughs, samples, and reference documentation. You can even <a href="/editdocs/" data-auto-burger-exclude>help contribute to the docs</a>!</p>
        </div>
        <div class="nav-box">
            <h3><a href="/community/">Community</a></h3>
            <p>If you need help, you can connect with other Kubernetes users and the Kubernetes authors, attend community events, and watch video presentations from around the web.</p>
        </div>
        <div class="nav-box">
            <h3><a href="http://blog.kubernetes.io">Blog</a></h3>
            <p>Read the latest news for Kubernetes and the containers space in general, and get technical how-tos hot off the presses.</p>
        </div>
        </main>
        <main data-auto-burger="primary">
        <div class="left">
            <h5 class="github-invite">Interested in hacking on the core Kubernetes code base?</h5>
            <a href="https://github.com/kubernetes/kubernetes" class="button" data-auto-burger-exclude>View On Github</a>
        </div>

        <div class="right">
            <h5 class="github-invite">Explore the community</h5>
            <div class="social">
                <a href="https://twitter.com/kubernetesio" class="twitter"><span>Twitter</span></a>
                <a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
                <a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
                <a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
                <a href="https://groups.google.com/forum/#!forum/kubernetes-users" class="mailing-list"><span>Mailing List</span></a>
                <a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
            </div>
        </div>
        <div class="clear" style="clear: both"></div>
        </main>
    </nav>
</header>


<!--  HERO  -->
<section id="hero" class="light-text">
  <h1>About</h1>
  <h5>Documentation for using and learning about Kubernetes.</h5>
  <div id="vendorStrip" class="light-text">
    <ul>
      <li><a href="/docs/home/" >HOME</a></li>
      <li><a href="/docs/setup/" >SETUP</a></li>
      <li><a href="/docs/concepts/" >CONCEPTS</a></li>
      <li><a href="/docs/tasks/" >TASKS</a></li>
      <li><a href="/docs/tutorials/" >TUTORIALS</a></li>
      <li><a href="/docs/reference/" >REFERENCE</a></li>
    </ul>
    <div id="searchBox">
      <input type="text" id="search" placeholder="Search" onkeydown="if (event.keyCode==13) window.location.replace('/docs/search/?q=' + this.value)" autofocus="autofocus">
    </div>
  </div>
</section>




<section id="encyclopedia">
  <div id="docsToc">
        <div class="pi-accordion">
          
  

    

    
      <a class="item" data-title="Kubernetes 文档" href="/docs/home/"></a>
    
  

  

    

    
      <a class="item" data-title="Supported Doc Versions" href="/docs/home/supported-doc-versions/"></a>
    
  

  
    <div class="item" data-title="Contributing to the Kubernetes Docs">
      <div class="container">
        
  

    

    
      <a class="item" data-title="Contributing to the Kubernetes Documentation" href="/editdocs/"></a>
    
  

  

    

    
      <a class="item" data-title="参与 SIG-DOCS" href="/docs/home/contribute/participating/"></a>
    
  

  

    

    
      <a class="item" data-title="创建一个文档 PR(Pull Request)" href="/docs/home/contribute/create-pull-request/"></a>
    
  

  

    

    
      <a class="item" data-title="编写一个新的主题" href="/docs/home/contribute/write-new-topic/"></a>
    
  

  

    

    
      <a class="item" data-title="展示您对文档的修改" href="/docs/home/contribute/stage-documentation-changes/"></a>
    
  

  

    

    
      <a class="item" data-title="使用页面模板" href="/docs/home/contribute/page-templates/"></a>
    
  

  

    

    
      <a class="item" data-title="检查文档 Issue" href="/docs/home/contribute/review-issues/"></a>
    
  

  

    

    
      <a class="item" data-title="Documentation Style Guide" href="/docs/home/contribute/style-guide/"></a>
    
  

  

    

    
      <a class="item" data-title="自定义 Jekyll Include 片段" href="/docs/home/contribute/includes/"></a>
    
  

  

    

    
      <a class="item" data-title="本地化 Kubernetes 文档" href="/docs/home/contribute/localization/"></a>
    
  

  
    <div class="item" data-title="Updating Automatically Generated Reference Pages">
      <div class="container">
        
  

    

    
      <a class="item" data-title="为 Kubernetes 组件和工具生成参考页面" href="/docs/home/contribute/generated-reference/kubernetes-components/"></a>
    
  

  

    

    
      <a class="item" data-title="Generating Reference Documentation for kubectl Commands" href="/docs/home/contribute/generated-reference/kubectl/"></a>
    
  

  

    

    
      <a class="item" data-title="为Kubernetes API生成参考文档" href="/docs/home/contribute/generated-reference/kubernetes-api/"></a>
    
  

  

    

    
      <a class="item" data-title="为Kubernetes Federation API生成参考文档" href="/docs/home/contribute/generated-reference/federation-api/"></a>
    
  


      </div>
    </div>
  


      </div>
    </div>
  


        </div> <!-- /pi-accordion -->
    <button class="push-menu-close-button" onclick="kub.toggleToc()"></button>
  </div> <!-- /docsToc -->

  <div id="docsContent">
        <p><a href="/editdocs#docs/home/contribute/generated-reference/kubernetes-api.md" id="editPageButton">Edit This Page</a></p>

        
          <h1>为Kubernetes API生成参考文档</h1>
        

        
<p>本页面将展示如何升级为Kubernetes API自动生成的文档.</p>

<ul id="markdown-toc">
  <li><a href="#before-you-begin" id="markdown-toc-before-you-begin">Before you begin</a></li>
  <li><a href="#概述" id="markdown-toc-概述">概述</a></li>
  <li><a href="#拉取三个仓库" id="markdown-toc-拉取三个仓库">拉取三个仓库</a></li>
  <li><a href="#修改-kubernetes-源码" id="markdown-toc-修改-kubernetes-源码">修改 Kubernetes 源码</a>    <ul>
      <li><a href="#修改源码中的注释" id="markdown-toc-修改源码中的注释">修改源码中的注释</a></li>
      <li><a href="#committing-your-edited-file" id="markdown-toc-committing-your-edited-file">Committing your edited file</a></li>
      <li><a href="#generating-the-openapi-spec-and-related-files" id="markdown-toc-generating-the-openapi-spec-and-related-files">Generating the OpenAPI spec and related files</a></li>
      <li><a href="#cherry-picking-your-commit-into-a-release-branch" id="markdown-toc-cherry-picking-your-commit-into-a-release-branch">Cherry picking your commit into a release branch</a></li>
    </ul>
  </li>
  <li><a href="#generating-the-published-reference-docs" id="markdown-toc-generating-the-published-reference-docs">Generating the published reference docs</a>    <ul>
      <li><a href="#editing-makefile-in-kubernetes-incubatorreference-docs" id="markdown-toc-editing-makefile-in-kubernetes-incubatorreference-docs">Editing Makefile in kubernetes-incubator/reference-docs</a></li>
      <li><a href="#copying-the-openapi-spec" id="markdown-toc-copying-the-openapi-spec">Copying the OpenAPI spec</a></li>
      <li><a href="#building-the-brodocs-image" id="markdown-toc-building-the-brodocs-image">Building the brodocs image</a></li>
      <li><a href="#running-the-doc-generation-code" id="markdown-toc-running-the-doc-generation-code">Running the doc generation code</a></li>
      <li><a href="#locate-the-generated-files" id="markdown-toc-locate-the-generated-files">Locate the generated files</a></li>
    </ul>
  </li>
  <li><a href="#copying-the-generated-docs-to-the-kuberneteswebsite-repository" id="markdown-toc-copying-the-generated-docs-to-the-kuberneteswebsite-repository">Copying the generated docs to the kubernetes/website repository</a></li>
  <li><a href="#whats-next" id="markdown-toc-whats-next">What’s next</a></li>
</ul>

<h2 id="before-you-begin">Before you begin</h2>

<p>你需要预安装以下工具:</p>

<ul>
  <li><a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git">Git</a></li>
  <li><a href="https://golang.org/doc/install">Golang</a> 1.9.1或更高版本</li>
  <li><a href="https://docs.docker.com/engine/installation/">Docker</a></li>
  <li><a href="https://github.com/coreos/etcd/">etcd</a></li>
</ul>

<p>你的环境变量<code class="highlighter-rouge">$GOPATH</code>需要被正确设置,并且你的<code class="highlighter-rouge">$PATH</code>中需要包含<code class="highlighter-rouge">etcd</code>的位置.</p>

<ul>
  <li>你需要知道如何去创建一个<code class="highlighter-rouge">PR</code>.例如,你首先需要将远程仓库<code class="highlighter-rouge">fork</code>到你的个人仓库.详见<a href="/docs/home/contribute/create-pull-request/">创建一个文档相关的PR</a> 和 
<a href="https://gist.github.com/Chaser324/ce0505fbed06b947d962">GitHub 标准 Fork &amp; PR工作流程</a>.</li>
</ul>

<h2 id="概述">概述</h2>

<p>更新Kubernetes API参考文档是一个两阶段的过程:</p>

<ol>
  <li>
    <p>从Kubernetes源代码生成一个OpenAPI规范.相关工具为 <a href="https://github.com/kubernetes/kubernetes/tree/master/hack">kubernetes/kubernetes/hack</a>.</p>
  </li>
  <li>
    <p>从OpenAPI规范生成一个HTML文件.相关工具为
<a href="https://github.com/kubernetes-incubator/reference-docs">kubernetes-incubator/reference-docs</a>.</p>
  </li>
</ol>

<h2 id="拉取三个仓库">拉取三个仓库</h2>

<p>如果你还没有kubernet/kubernetes的存储库,请先下载:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir <span class="nv">$GOPATH</span>/src
<span class="nb">cd</span> <span class="nv">$GOPATH</span>/src
go get github.com/kubernetes/kubernetes
</code></pre></div></div>

<p>确定你克隆项目
<a href="https://github.com/kubernetes/kubernetes">kubernetes/kubernetes</a> 的根目录.
例如,如果你执行了上面的命令，你的根目录应该为<code class="highlighter-rouge">$GOPATH/src/github.com/kubernetes/kubernetes.</code>
下文将以 <code class="highlighter-rouge">&lt;k8s-base&gt;</code>指代项目根目录.</p>

<p>如果你还没有kubernetes/website的存储库,请先下载:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir <span class="nv">$GOPATH</span>/src
<span class="nb">cd</span> <span class="nv">$GOPATH</span>/src
go get github.com/kubernetes/website
</code></pre></div></div>

<p>确定你克隆项目
<a href="https://github.com/kubernetes/website">kubernetes/website</a> 的根目录.
例如,如果你执行了上面的命令，你的根目录应该为<code class="highlighter-rouge">$GOPATH/src/github.com/kubernetes/website.</code>
下文将以 <code class="highlighter-rouge">&lt;web-base&gt;</code>指代项目根目录.</p>

<p>如果你还没有kubernetes-incubator/reference-docs的存储库,请先下载:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir <span class="nv">$GOPATH</span>/src
<span class="nb">cd</span> <span class="nv">$GOPATH</span>/src
go get github.com/kubernetes-incubator/reference-docs
</code></pre></div></div>

<p>确定你克隆项目
<a href="https://github.com/kubernetes-incubator/reference-docs">kubernetes-incubator/reference-docs</a> 的根目录.
例如,如果你执行了上面的命令，你的根目录应该为<code class="highlighter-rouge">$GOPATH/src/github.com/kubernetes-incubator/reference-docs.</code>
下文将以 <code class="highlighter-rouge">&lt;rdocs-base&gt;</code>指代项目根目录.</p>

<h2 id="修改-kubernetes-源码">修改 Kubernetes 源码</h2>

<p>Kubernetes API 参考文档是根据一个 OpenAPI 实例自动生成的, 该OpenAPI实例是由 Kubernetes 源码生成. 如果你想修改参考文档,首先要做的就是修改一行或者多行 Kubernetes 源码中的注释.</p>

<h3 id="修改源码中的注释">修改源码中的注释</h3>

<p class="note"><strong>Note</strong>: 下面的步骤是一个示例，而不是一个通用过程. 其中的一些细节将根据你的实际情况做出相应改变.</p>

<p>下面是在Kubernetes源代码中编辑注释的一个例子.</p>

<p>在您的本地 kubernet/kubernetes 存储库中,请查看主分支,
并确保它是最新的:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> &lt;k8s-base&gt;
git checkout master
git pull https://github.com/kubernetes/kubernetes master
</code></pre></div></div>

<p>假设主分支中的这个源文件有一个输入错误 “atmost”:</p>

<p><a href="https://github.com/kubernetes/kubernetes/blob/master/staging/src/k8s.io/api/apps/v1/types.go">kubernetes/kubernetes/staging/src/k8s.io/api/apps/v1/types.go</a></p>

<p>在你本地环境中,打开 <code class="highlighter-rouge">types.go</code>, 并将 “atmost” 改为 “at most”.</p>

<p>确认你已经更改了文件:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git status
</code></pre></div></div>

<p>输出显示你所在的分支为master, 并且 <code class="highlighter-rouge">types.go</code>
源文件已被修改:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>On branch master
...
    modified:   staging/src/k8s.io/api/apps/v1/types.go
</code></pre></div></div>

<h3 id="committing-your-edited-file">Committing your edited file</h3>

<p>Run <code class="highlighter-rouge">git add</code> and <code class="highlighter-rouge">git commit</code> to commit the changes you have made so far. In the next step,
you will do a second commit. It is important to keep your changes separated into two commits.</p>

<h3 id="generating-the-openapi-spec-and-related-files">Generating the OpenAPI spec and related files</h3>

<p>Go to <code class="highlighter-rouge">&lt;k8s-base&gt;</code> and run these scripts:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>hack/update-generated-swagger-docs.sh
hack/update-swagger-spec.sh
hack/update-openapi-spec.sh
hack/update-generated-protobuf.sh
hack/update-api-reference-docs.sh
</code></pre></div></div>

<p>Run <code class="highlighter-rouge">git status</code> to see what was generated.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>On branch master
...
    modified:   api/openapi-spec/swagger.json
    modified:   api/swagger-spec/apps_v1.json
    modified:   docs/api-reference/apps/v1/definitions.html
    modified:   staging/src/k8s.io/api/apps/v1/generated.proto
    modified:   staging/src/k8s.io/api/apps/v1/types.go
    modified:   staging/src/k8s.io/api/apps/v1/types_swagger_doc_generated.go
</code></pre></div></div>

<p>View the contents of <code class="highlighter-rouge">api/openapi-spec/swagger.json</code> to make sure the typo is fixed.
For example, you could run <code class="highlighter-rouge">git diff -a api/openapi-spec/swagger.json</code>.
This is important, because <code class="highlighter-rouge">swagger.json</code> will be the input to the second stage of
the doc generation process.</p>

<p>Run <code class="highlighter-rouge">git add</code> and <code class="highlighter-rouge">git commit</code> to commit your changes. Now you have two commits:
one that has the edited <code class="highlighter-rouge">types.go</code> file, and one that has the generated OpenAPI spec
and related files. Keep these two commits separate. That is, do not squash your commits.</p>

<p>Submit your changes as a
<a href="https://help.github.com/articles/creating-a-pull-request/">pull request</a> to the
master branch of the
<a href="https://github.com/kubernetes/kubernetes">kubernetes/kubernetes</a> repository.
Monitor your pull request, and respond to reviewer comments as needed. Continue
to monitor your pull request until it has been merged.</p>

<p><a href="https://github.com/kubernetes/kubernetes/pull/57758">PR 57758</a>
is an example of a pull request that fixes a typo in the Kubernetes source code.</p>

<p class="note"><strong>Note</strong>: It can be tricky to determine the correct source file to be changed. In the
preceding example, the authoritative source file is under the <code class="highlighter-rouge">staging</code> directory
in the <code class="highlighter-rouge">kubernetes/kubernetes</code> repository. But in your situation,the <code class="highlighter-rouge">staging</code> directory
might not be the place to find the authoritative source. For guidance, check the
<code class="highlighter-rouge">README</code> files in
<a href="https://github.com/kubernetes/kubernetes/tree/master/staging">kubernetes/kubernetes</a>
repository and in related repositories like
<a href="https://github.com/kubernetes/apiserver/blob/master/README.md">kubernetes/apiserver</a>.</p>

<h3 id="cherry-picking-your-commit-into-a-release-branch">Cherry picking your commit into a release branch</h3>

<p>In the preceding section, you edited a file in the master branch and then ran scripts
to generate an OpenAPI spec and related files. Then you submitted your changes in a pull request
to the master branch of the kubernetes/kubernetes repository. Now suppose you want to backport
your change into a release branch. For example, suppose the master branch is being used to develop
Kubernetes version 1.10, and you want to backport your change into the release-1.9 branch.</p>

<p>Recall that your pull request has two commits: one for editing <code class="highlighter-rouge">types.go</code>
and one for the files generated by scripts. The next step is to propose a cherry pick of your first 
commit into the release-1.9 branch. The idea is to cherry pick the commit that edited <code class="highlighter-rouge">types.go</code>, but not
the commit that has the results of running the scripts. For instructions, see
<a href="https://github.com/kubernetes/community/blob/master/contributors/devel/cherry-picks.md">Propose a Cherry Pick</a>.</p>

<p><strong>Note:</strong> Proposing a cherry pick requires that you have permission to set a label and a milestone in your
pull request. If you don’t have those permissions, you will need to work with someone who can set the label
and milestone for you.</p>

<p>When you have a pull request in place for cherry picking your one commit into the release-1.9 branch,
the next step is to run these scripts in the release-1.9 branch of your local environment.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>hack/update-generated-swagger-docs.sh
hack/update-swagger-spec.sh
hack/update-openapi-spec.sh
hack/update-generated-protobuf.sh
hack/update-api-reference-docs.sh
</code></pre></div></div>

<p>Now add a commit to your cherry-pick pull request that has the recently generated OpenAPI spec
and related files. Monitor your pull request until it gets merged into the release-1.9 branch.</p>

<p>At this point, both the master branch and the release-1.9 branch have your updated <code class="highlighter-rouge">types.go</code>
file and a set of generated files that reflect the change you made to <code class="highlighter-rouge">types.go</code>. Note that the
generated OpenAPI spec and other generated files in the release-1.9 branch are not necessarily
the same as the generated files in the master branch. The generated files in the release-1.9 branch
contain API elements only from Kubernetes 1.9. The generated files in the master branch might contain
API elements that are not in 1.9, but are under development for 1.10.</p>

<h2 id="generating-the-published-reference-docs">Generating the published reference docs</h2>

<p>The preceding section showed how to edit a source file and then generate
several files, including <code class="highlighter-rouge">api/openapi-spec/swagger.json</code> in the 
<code class="highlighter-rouge">kubernetes/kubernetes</code> repository.</p>

<p>This section shows how to generate the
<a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.9/">published Kubernetes API reference documentation</a>,
which is generated by the tools at
<a href="https://github.com/kubernetes-incubator/reference-docs">kubernetes-incubator/reference-docs</a>.
Those tools take the <code class="highlighter-rouge">api/openapi-spec/swagger.json</code> file as input.</p>

<h3 id="editing-makefile-in-kubernetes-incubatorreference-docs">Editing Makefile in kubernetes-incubator/reference-docs</h3>

<p>Go to <code class="highlighter-rouge">&lt;rdocs-base&gt;</code>, and open <code class="highlighter-rouge">Makefile</code> for editing:</p>

<p>Set <code class="highlighter-rouge">K8SROOT</code> to the base directory of your local kubernetes/kubernetes
repository. Set <code class="highlighter-rouge">WEBROOT</code> to the base directory of your local kubernetes/website repository.
Set <code class="highlighter-rouge">MINOR_VERSION</code> to the minor version of the docs you want to build. For example,
if you want to build docs for Kubernetes 1.9, set <code class="highlighter-rouge">MINOR_VERSION</code> to 9. Save and close <code class="highlighter-rouge">Makefile</code>.</p>

<h3 id="copying-the-openapi-spec">Copying the OpenAPI spec</h3>

<p>The doc generation code needs a local copy of the OpenAPI spec for the Kubernetes API.
Go to <code class="highlighter-rouge">&lt;k8s-base&gt;</code> and check out the branch that has the OpenAPI spec you want to use.
For example, if you want to generate docs for Kubernetes 1.9, checkout the release-1.9
branch.</p>

<p>Go back to <code class="highlighter-rouge">&lt;rdocs-base&gt;</code>. Enter the following command to copy the OpenAPI spec from the
<code class="highlighter-rouge">kubernetes/kubernetes</code> repository to a local directory:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make updateapispec
</code></pre></div></div>

<p>The output shows that the file was copied:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cp ~/src/github.com/kubernetes/kubernetes/api/openapi-spec/swagger.json gen-apidocs/generators/openapi-spec/swagger.json
</code></pre></div></div>

<h3 id="building-the-brodocs-image">Building the brodocs image</h3>

<p>The doc generation code requires the
<a href="https://github.com/pwittrock/brodocs">pwittrock/brodocs</a> Docker image.</p>

<p>This command creates the <code class="highlighter-rouge">pwittrock/brodocs</code> Docker image. It also tries to push the image to
DockerHub, but it’s OK if that step fails. As long as you have the image locally, the code generation
can succeed.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make brodocs
</code></pre></div></div>

<p>Verify that you have the brodocs image:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker images
</code></pre></div></div>

<p>The output shows <code class="highlighter-rouge">pwittrock/brodocs</code> as one of the available images:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
pwittrock/brodocs   latest              999d34a50d56        5 weeks ago         714MB
</code></pre></div></div>

<h3 id="running-the-doc-generation-code">Running the doc generation code</h3>

<p>Build and run the doc generation code. You might need to run the command as root:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> &lt;rdocs-base&gt;
make api
</code></pre></div></div>

<h3 id="locate-the-generated-files">Locate the generated files</h3>

<p>These two files are the output of a successful build. Verify that they exist:</p>

<ul>
  <li><code class="highlighter-rouge">&lt;rdocs-base&gt;/gen-apidocs/generators/build/index.html</code></li>
  <li><code class="highlighter-rouge">&lt;rdocs-base&gt;/gen-apidocs/generators/build/navData.js</code></li>
</ul>

<h2 id="copying-the-generated-docs-to-the-kuberneteswebsite-repository">Copying the generated docs to the kubernetes/website repository</h2>

<p>The preceding sections showed how to edit a Kubernetes source file,
generate an OpenAPI spec, and then generate reference documentation for publication.</p>

<p>This section show how to copy the generated docs to the
<a href="https://github.com/kubernetes/website">kubernetes/website</a> repository. The files
in the <code class="highlighter-rouge">kubernetes/website</code> repository are published in the
<a href="https://kubernetes.io">kubernetes.io</a> website. In particular, the generated
<code class="highlighter-rouge">index.html</code> file is published <a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.9/">here</a>.</p>

<p>Enter the following command to copy the generated files to
your local kubernetes/website repository:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make copyapi
</code></pre></div></div>

<p>Go to the base of your local kubernetes/kubernetes repository, and 
see which files have been modified:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> &lt;web-base&gt;
git status
</code></pre></div></div>

<p>The output shows the modified files:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>On branch master
...
   modified:   docs/reference/generated/kubernetes-api/v1.9/index.html
</code></pre></div></div>

<p>In this example, only one file has been modified. Recall that you generated both
<code class="highlighter-rouge">index.html</code> and <code class="highlighter-rouge">navData.js</code>. But apparently the generated <code class="highlighter-rouge">navata.js</code> is not different
from the <code class="highlighter-rouge">navData.js</code> that was already in the kubernetes/website` repository.</p>

<p>In <code class="highlighter-rouge">&lt;web-base&gt;</code> run <code class="highlighter-rouge">git add</code> and <code class="highlighter-rouge">git commit</code> to commit the change.</p>

<p>Submit your changes as a
<a href="/docs/home/contribute/create-pull-request/">pull request</a> to the
<a href="https://github.com/kubernetes/website">kubernetes/website</a> repository.
Monitor your pull request, and respond to reviewer comments as needed. Continue
to monitor your pull request until it has been merged.</p>

<p>A few minutes after your pull request is merged, your changes will be visible
in the <a href="/docs/reference/generated/kubernetes-api/v1.9/">published reference documentation</a>.</p>

<h2 id="whats-next">What’s next</h2>

<ul>
  <li><a href="/docs/home/contribute/generated-reference/kubernetes-components/">Generating Reference Docs for Kubernetes Components and Tools</a></li>
  <li><a href="/docs/home/contribute/generated-reference/kubectl/">Generating Reference Documentation for kubectl Commands</a></li>
  <li><a href="/docs/home/contribute/generated-reference/federation-api/">Generating Reference Documentation for the Kubernetes Federation API</a></li>
</ul>



        <p><a href=""><img src="https://kubernetes-site.appspot.com/UA-36037335-10/GitHub/docs/home/contribute/generated-reference/kubernetes-api.md?pixel" alt="Analytics" /></a></p>
        
        
        <script type="text/javascript">
            PDRTJS_settings_8345992 = {
                "id" : "8345992",
                "unique_id" : "/docs/home/contribute/generated-reference/kubernetes-api/",
                "title" : "为Kubernetes API生成参考文档",
                "permalink" : "https://kubernetes.io/docs/home/contribute/generated-reference/kubernetes-api/"
            };
            (function(d,c,j){if(!document.getElementById(j)){var pd=d.createElement(c),s;pd.id=j;pd.src=('https:'==document.location.protocol)?'https://polldaddy.com/js/rating/rating.js':'http://i0.poll.fm/js/rating/rating.js';s=document.getElementsByTagName(c)[0];s.parentNode.insertBefore(pd,s);}}(document,'script','pd-rating-js'));
        </script>
        <a href="" onclick="window.open('https://github.com/kubernetes/website/issues/new?title=Issue%20with%20' +
        'k8s.io'+window.location.pathname)" class="button issue">Create an Issue</a>
        
        
          <a href="/editdocs#docs/home/contribute/generated-reference/kubernetes-api.md" class="button issue">Edit this Page</a>
        
    
    </div>
</section>

<footer>
    <main class="light-text">
        <nav>
            <a href="/docs/tutorials/stateless-application/hello-minikube/">Get Started</a>
            <a href="/docs/home/">Documentation</a>
            <a href="http://blog.kubernetes.io/">Blog</a>
            <a href="/partners/">Partners</a>
            <a href="/community/">Community</a>
            <a href="/case-studies/">Case Studies</a>
        </nav>
        <div class="social">
            <div>
                <a href="https://twitter.com/kubernetesio" class="twitter"><span>twitter</span></a>
                <a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
                <a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
            </div>
            <div>
                <a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
                <a href="https://groups.google.com/forum/#!forum/kubernetes-users" class="mailing-list"><span>Mailing List</span></a>
                <a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
            </div>
            <div>
                <a href="/docs/setup/pick-right-solution/" class="button">Get Kubernetes</a>
                <a href="https://github.com/kubernetes/kubernetes" class="button">Contribute</a>
            </div>
        </div>
        <div id="miceType" class="center">
            &copy; 2018 The Kubernetes Authors | Documentation Distributed under <a href="https://git.k8s.io/website/LICENSE" class="light-text">CC BY 4.0</a>
        </div>
        <div id="miceType" class="center">
            Copyright &copy; 2018 The Linux Foundation&reg;. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage" class="light-text">Trademark Usage page</a>
        </div>
    </main>
</footer>

<button class="flyout-button" onclick="kub.toggleToc()"></button>

<style>
.cse .gsc-control-cse, .gsc-control-cse, {
    padding: 0;
}
  .gsc-control-cse table, .gsc-control-cse-en table {
      margin:0px !important;
  }
  .gsc-above-wrapper-area {
      border-bottom: 0;
  }
</style>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-36037335-10', 'auto');
ga('send', 'pageview');

// hide docs nav area if no nav is present, or if nav only contains a link to the current page
(function () {
    window.addEventListener('DOMContentLoaded', init)

        // play nice with our neighbors
        function init() {
            window.removeEventListener('DOMContentLoaded', init)
                hideNav()
        }

    function hideNav(toc){
        if (!toc) toc = document.querySelector('#docsToc')
        if (!toc) return
            var container = toc.querySelector('.container')

                // container is built dynamically, so it may not be present on the first runloop
                if (container) {
                    if (container.childElementCount === 0 || toc.querySelectorAll('a.item').length === 1) {
                        toc.style.display = 'none'
                            document.getElementById('docsContent').style.width = '100%'
                    }
                } else {
                    requestAnimationFrame(function () {
                        hideNav(toc)
                    })
                }
    }
})();
</script>

<!-- Commenting out AnswerDash for now; we need to work on our list of questions/answers/design first
    <!-- Start of AnswerDash script <script>var AnswerDash;!function(e,t,n,s,a){if(!t.getElementById(s)){var i,r=t.createElement(n),c=t.getElementsByTagName(n)[0];e[a]||(i=e[a]=function(){i.__oninit.push(arguments)},i.__oninit=[]),r.type="text/javascript",r.async=!0,r.src="https://p1.answerdash.com/answerdash.min.js?siteid=756",r.setAttribute("id",s),c.parentNode.insertBefore(r,c)}}(window,document,"script","answerdash-script","AnswerDash");</script> <!-- End of AnswerDash script -->


</body>
</html>
