
  
    
    

  

  
    
    

  

  
    

<!Doctype html>
<html id="docs" class="Setup">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="/images/favicon.png">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto+Mono">
    <link rel="stylesheet" type="text/css" href="/css/styles.css"><!-- default styles.css on -->
    <link rel="stylesheet" type="text/css" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css">
    <link rel="stylesheet" type="text/css" href="/css/callouts.css">
    <link rel="stylesheet" type="text/css" href="/css/custom-jekyll/tags.css">
    
    
    <!-- no custom css detected -->

    
    <meta name="description" content="Upgrades" />
    

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js"></script>
    <script src="/js/script.js"></script>
    <script src="/js/custom-jekyll/tags.js"></script>
    <!-- no custom js detected -->
    <!-- Begin Jekyll SEO tag v2.4.0 -->
<title>Upgrades | Kubernetes</title>
<meta name="generator" content="Jekyll v3.6.0" />
<meta property="og:title" content="Upgrades" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Production-Grade Container Orchestration" />
<meta property="og:description" content="Production-Grade Container Orchestration" />
<link rel="canonical" href="http://0.0.0.0:4000/docs/getting-started-guides/ubuntu/upgrades/" />
<meta property="og:url" content="http://0.0.0.0:4000/docs/getting-started-guides/ubuntu/upgrades/" />
<meta property="og:site_name" content="Kubernetes" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@kubernetesio" />
<script type="application/ld+json">
{"description":"Production-Grade Container Orchestration","@type":"WebPage","url":"http://0.0.0.0:4000/docs/getting-started-guides/ubuntu/upgrades/","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://0.0.0.0:4000/images/favicon.png"}},"headline":"Upgrades","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>


<body>

<div id="cellophane" onclick="kub.toggleMenu()"></div>

<header>
    <a href="/" class="logo"></a>

    <div class="nav-buttons" data-auto-burger="primary">
        <ul class="global-nav">
            <li><a href="/docs/home/">Documentation</a></li>
            <li><a href="http://blog.kubernetes.io/">Blog</a></li>
            <li><a href="/partners/">Partners</a></li>
            <li><a href="/community/">Community</a></li>
            <li><a href="/case-studies/">Case Studies</a></li>
            <li>
                <a href="#">
                    v1.9 <span class="ui-icon ui-icon-carat-1-s"></span>
                </a>
                <ul>
                
                    
                    <li><a href="https://kubernetes.io/docs/getting-started-guides/ubuntu/upgrades/">v1.9</a></li>
                    
                
                    
                    <li><a href="https://v1-8.docs.kubernetes.io/docs/getting-started-guides/ubuntu/upgrades/">v1.8</a></li>
                    
                
                    
                    <li><a href="https://v1-7.docs.kubernetes.io/docs/getting-started-guides/ubuntu/upgrades/">v1.7</a></li>
                    
                
                    
                    <li><a href="https://v1-6.docs.kubernetes.io/docs/getting-started-guides/ubuntu/upgrades/">v1.6</a></li>
                    
                
                    
                    <li><a href="https://v1-5.docs.kubernetes.io/docs/getting-started-guides/ubuntu/upgrades/">v1.5</a></li>
                    
                
                </ul>
            </li>
        </ul>
        <!-- <a href="/docs/home" class="button" id="viewDocs" data-auto-burger-exclude>View Documentation</a> -->
        <a href="/docs/tutorials/kubernetes-basics/" class="button" id="tryKubernetes" data-auto-burger-exclude>Try Kubernetes</a>
        <button id="hamburger" onclick="kub.toggleMenu()" data-auto-burger-exclude><div></div></button>
    </div>

    <nav id="mainNav">
        <main data-auto-burger="primary">
        <div class="nav-box">
            <h3><a href="/docs/tutorials/stateless-application/hello-minikube/">Get Started</a></h3>
            <p>Ready to get your hands dirty? Build a simple Kubernetes cluster that runs "Hello World" for Node.js.</p>
        </div>
        <div class="nav-box">
            <h3><a href="/docs/home/">Documentation</a></h3>
            <p>Learn how to use Kubernetes with the use of walkthroughs, samples, and reference documentation. You can even <a href="/editdocs/" data-auto-burger-exclude>help contribute to the docs</a>!</p>
        </div>
        <div class="nav-box">
            <h3><a href="/community/">Community</a></h3>
            <p>If you need help, you can connect with other Kubernetes users and the Kubernetes authors, attend community events, and watch video presentations from around the web.</p>
        </div>
        <div class="nav-box">
            <h3><a href="http://blog.kubernetes.io">Blog</a></h3>
            <p>Read the latest news for Kubernetes and the containers space in general, and get technical how-tos hot off the presses.</p>
        </div>
        </main>
        <main data-auto-burger="primary">
        <div class="left">
            <h5 class="github-invite">Interested in hacking on the core Kubernetes code base?</h5>
            <a href="https://github.com/kubernetes/kubernetes" class="button" data-auto-burger-exclude>View On Github</a>
        </div>

        <div class="right">
            <h5 class="github-invite">Explore the community</h5>
            <div class="social">
                <a href="https://twitter.com/kubernetesio" class="twitter"><span>Twitter</span></a>
                <a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
                <a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
                <a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
                <a href="https://groups.google.com/forum/#!forum/kubernetes-users" class="mailing-list"><span>Mailing List</span></a>
                <a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
            </div>
        </div>
        <div class="clear" style="clear: both"></div>
        </main>
    </nav>
</header>


<!--  HERO  -->
<section id="hero" class="light-text">
  <h1>Setup</h1>
  <h5>Instructions for setting up a Kubernetes cluster.</h5>
  <div id="vendorStrip" class="light-text">
    <ul>
      <li><a href="/docs/home/" >HOME</a></li>
      <li><a href="/docs/setup/" class="YAH">SETUP</a></li>
      <li><a href="/docs/concepts/" >CONCEPTS</a></li>
      <li><a href="/docs/tasks/" >TASKS</a></li>
      <li><a href="/docs/tutorials/" >TUTORIALS</a></li>
      <li><a href="/docs/reference/" >REFERENCE</a></li>
    </ul>
    <div id="searchBox">
      <input type="text" id="search" placeholder="Search" onkeydown="if (event.keyCode==13) window.location.replace('/docs/search/?q=' + this.value)" autofocus="autofocus">
    </div>
  </div>
</section>




<section id="encyclopedia">
  <div id="docsToc">
        <div class="pi-accordion">
          
  

    

    
      <a class="item" data-title="安装" href="/docs/setup/"></a>
    
  

  

    

    
      <a class="item" data-title="选择正确的解决方案" href="/docs/setup/pick-right-solution/"></a>
    
  

  
    <div class="item" data-title="Downloading Kubernetes">
      <div class="container">
        
  

    

    
      <a class="item" data-title="v1.9 Release Notes" href="/docs/imported/release/notes/"></a>
    
  

  

    

    
      <a class="item" data-title="从源代码构建" href="/docs/setup/building-from-source/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Independent Solutions">
      <div class="container">
        
  

    

    
      <a class="item" data-title="通过 Minikube 在本地运行 Kubernetes" href="/docs/getting-started-guides/minikube/"></a>
    
  

  
    <div class="item" data-title="Bootstrapping Clusters with kubeadm">
      <div class="container">
        
  

    

    
      <a class="item" data-title="" href="/docs/setup/independent/install-kubeadm/"></a>
    
  

  

    

    
      <a class="item" data-title="Using kubeadm to Create a Cluster" href="/docs/setup/independent/create-cluster-kubeadm/"></a>
    
  

  

    

    
      <a class="item" data-title="kubeadm 故障排查" href="/docs/setup/independent/troubleshooting-kubeadm/"></a>
    
  

  

    

    
      <a class="item" data-title="使用 kubeadm 创建高可用集群" href="/docs/setup/independent/high-availability/"></a>
    
  


      </div>
    </div>
  

  

    

    
      <a class="item" data-title="从零开始搭建自定义集群" href="/docs/getting-started-guides/scratch/"></a>
    
  

  

    

    
      <a class="item" data-title="废弃的选项" href="/docs/getting-started-guides/alternatives/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Hosted Solutions">
      <div class="container">
        
  

    

    
      <a class="item" data-title="Running Kubernetes on Google Kubernetes Engine" href="https://cloud.google.com/kubernetes-engine/docs/before-you-begin/"></a>
    
  

  

    

    
      <a class="item" data-title="Running Kubernetes on Azure Container Service" href="https://docs.microsoft.com/en-us/azure/container-service/container-service-kubernetes-walkthrough"></a>
    
  

  

    

    
      <a class="item" data-title="Running Kubernetes on IBM Cloud Container Service" href="https://console.bluemix.net/docs/containers/container_index.html"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Turn-key Cloud Solutions">
      <div class="container">
        
  

    

    
      <a class="item" data-title="在阿里云上运行 Kubernetes" href="/docs/getting-started-guides/alibaba-cloud/"></a>
    
  

  

    

    
      <a class="item" data-title="在 AWS EC2 上运行 Kubernetes" href="/docs/getting-started-guides/aws/"></a>
    
  

  

    

    
      <a class="item" data-title="在 Azure 上运行 Kubernetes" href="/docs/getting-started-guides/azure/"></a>
    
  

  

    

    
      <a class="item" data-title="在 CenturyLink Cloud 上运行 Kubernetes" href="/docs/getting-started-guides/clc/"></a>
    
  

  

    

    
      <a class="item" data-title="在 Google 计算引擎上运行 Kubernetes" href="/docs/getting-started-guides/gce/"></a>
    
  

  

    

    
      <a class="item" data-title="Running Kubernetes on IBM Cloud" href="https://github.com/patrocinio/kubernetes-softlayer"></a>
    
  

  

    

    
      <a class="item" data-title="通过 Stackpoint.io 在多个云平台上运行 Kubernetes" href="/docs/getting-started-guides/stackpoint/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Custom Solutions">
      <div class="container">
        
  
    <div class="item" data-title="Custom Cloud Solutions">
      <div class="container">
        
  

    

    
      <a class="item" data-title="AWS 或 GCE 上的 CoreOS" href="/docs/getting-started-guides/coreos/"></a>
    
  

  

    

    
      <a class="item" data-title="Kubernetes on Ubuntu" href="/docs/getting-started-guides/ubuntu/"></a>
    
  

  

    

    
      <a class="item" data-title="" href="/docs/getting-started-guides/kops/"></a>
    
  

  

    

    
      <a class="item" data-title="使用 Kubespray 在基础设施或云平台上安装 Kubernetes" href="/docs/getting-started-guides/kubespray/"></a>
    
  

  

    

    
  


      </div>
    </div>
  

  
    <div class="item" data-title="On-Premises VMs">
      <div class="container">
        
  

    

    
      <a class="item" data-title="AWS 或 GCE 上的 CoreOS" href="/docs/getting-started-guides/coreos/"></a>
    
  

  

    

    
      <a class="item" data-title="Cloudstack" href="/docs/getting-started-guides/cloudstack/"></a>
    
  

  

    

    
      <a class="item" data-title="VMware vSphere" href="https://vmware.github.io/vsphere-storage-for-kubernetes/documentation/"></a>
    
  

  

    

    
      <a class="item" data-title="DCOS" href="/docs/getting-started-guides/dcos/"></a>
    
  

  

    

    
      <a class="item" data-title="oVirt" href="/docs/getting-started-guides/ovirt/"></a>
    
  

  
    <div class="item" data-title="Bare Metal">
      <div class="container">
        
  

    

    
      <a class="item" data-title="Offline" href="/docs/getting-started-guides/coreos/bare_metal_offline/"></a>
    
  

  

    

    
      <a class="item" data-title="Fedora (单节点)" href="/docs/getting-started-guides/fedora/fedora_manual_config/"></a>
    
  

  

    

    
      <a class="item" data-title="Fedora（多节点）" href="/docs/getting-started-guides/fedora/flannel_multi_node_cluster/"></a>
    
  

  

    

    
      <a class="item" data-title="AWS 或 GCE 上的 CoreOS" href="/docs/getting-started-guides/coreos/"></a>
    
  

  

    

    
      <a class="item" data-title="Kubernetes on Ubuntu" href="/docs/getting-started-guides/ubuntu/"></a>
    
  

  
    <div class="item" data-title="Ubuntu">
      <div class="container">
        
  

    

    
      <a class="item" data-title="Kubernetes on Ubuntu" href="/docs/getting-started-guides/ubuntu/"></a>
    
  

  

    

    
      <a class="item" data-title="Validation - End-to-end Testing" href="/docs/getting-started-guides/ubuntu/validation/"></a>
    
  

  

    

    
      <a class="item" data-title="备份" href="/docs/getting-started-guides/ubuntu/backups/"></a>
    
  

  

    

    
      <a class="item" data-title="Upgrades" href="/docs/getting-started-guides/ubuntu/upgrades/"></a>
    
  

  

    

    
      <a class="item" data-title="伸缩" href="/docs/getting-started-guides/ubuntu/scaling/"></a>
    
  

  

    

    
      <a class="item" data-title="Setting up Kubernetes with Juju" href="/docs/getting-started-guides/ubuntu/installation/"></a>
    
  

  

    

    
      <a class="item" data-title="监控" href="/docs/getting-started-guides/ubuntu/monitoring/"></a>
    
  

  

    

    
      <a class="item" data-title="Networking" href="/docs/getting-started-guides/ubuntu/networking/"></a>
    
  

  

    

    
      <a class="item" data-title="安全考虑" href="/docs/getting-started-guides/ubuntu/security/"></a>
    
  

  

    

    
      <a class="item" data-title="" href="/docs/getting-started-guides/ubuntu/storage/"></a>
    
  

  

    

    
      <a class="item" data-title="故障排除" href="/docs/getting-started-guides/ubuntu/troubleshooting/"></a>
    
  

  

    

    
      <a class="item" data-title="Decommissioning" href="/docs/getting-started-guides/ubuntu/decommissioning/"></a>
    
  

  

    

    
      <a class="item" data-title="操作注意事项" href="/docs/getting-started-guides/ubuntu/operational-considerations/"></a>
    
  

  

    

    
      <a class="item" data-title="词汇和术语" href="/docs/getting-started-guides/ubuntu/glossary/"></a>
    
  

  

    

    
      <a class="item" data-title="通过 LXD 实现 Kubernetes 本地开发" href="/docs/getting-started-guides/ubuntu/local/"></a>
    
  

  

    

    
      <a class="item" data-title="" href="/docs/getting-started-guides/ubuntu/logging/"></a>
    
  

  

    

    
      <a class="item" data-title="Rancher 与 Ubuntu Kubernetes 集成" href="/docs/getting-started-guides/ubuntu/rancher/"></a>
    
  


      </div>
    </div>
  


      </div>
    </div>
  

  

    

    
      <a class="item" data-title="Windows Server 容器" href="/docs/getting-started-guides/windows/"></a>
    
  


      </div>
    </div>
  

  

    

    
      <a class="item" data-title="节点设置校验" href="/docs/admin/node-conformance/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="User Journeys">
      <div class="container">
        
  
    <div class="item" data-title="Application Developer">
      <div class="container">
        
  

    

    
      <a class="item" data-title="Foundational" href="/docs/user-journeys/users/application-developer/foundational/"></a>
    
  

  

    

    
      <a class="item" data-title="媒介" href="/docs/user-journeys/users/application-developer/intermediate/"></a>
    
  

  

    

    
      <a class="item" data-title="高级主题" href="/docs/user-journeys/users/application-developer/advanced/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Cluster Operator">
      <div class="container">
        
  

    

    
      <a class="item" data-title="基础" href="/docs/user-journeys/users/cluster-operator/foundational/"></a>
    
  

  

    

    
      <a class="item" data-title="媒介" href="/docs/user-journeys/users/cluster-operator/intermediate/"></a>
    
  


      </div>
    </div>
  

  

    

    
      <a class="item" data-title="Docs Contributor" href="/docs/home/?path=contributors&persona=docs-contributor&level=foundational"></a>
    
  

  

    

    
      <a class="item" data-title="Code Contributor" href="/docs/home/?path=contributors&persona=code-contributor&level=foundational"></a>
    
  

  

    

    
      <a class="item" data-title="Community Contributor" href="/docs/home/?path=contributors&persona=community-contributor&level=foundational"></a>
    
  


      </div>
    </div>
  

  

    

    
      <a class="item" data-title="Installing Addons" href="/docs/concepts/cluster-administration/addons/"></a>
    
  

  

    

    
      <a class="item" data-title="Configuring Kubernetes with Salt" href="/docs/admin/salt/"></a>
    
  

  

    

    
      <a class="item" data-title="Building Large Clusters" href="/docs/admin/cluster-large/"></a>
    
  

  

    

    
      <a class="item" data-title="Running in Multiple Zones" href="/docs/admin/multiple-zones/"></a>
    
  

  

    

    
      <a class="item" data-title="Building High-Availability Clusters" href="/docs/admin/high-availability/building/"></a>
    
  


        </div> <!-- /pi-accordion -->
    <button class="push-menu-close-button" onclick="kub.toggleToc()"></button>
  </div> <!-- /docsToc -->

  <div id="docsContent">
        <p><a href="/editdocs#docs/getting-started-guides/ubuntu/upgrades.md" id="editPageButton">Edit This Page</a></p>

        
          <h1>Upgrades</h1>
        

        
<p>This page will outline how to manage and execute a Kubernetes upgrade.</p>

<ul id="markdown-toc">
  <li><a href="#before-you-begin" id="markdown-toc-before-you-begin">Before you begin</a></li>
  <li><a href="#patch-kubernetes-upgrades-for-example-190---191" id="markdown-toc-patch-kubernetes-upgrades-for-example-190---191">Patch kubernetes upgrades for example 1.9.0 -&gt; 1.9.1</a></li>
  <li><a href="#upgrading-a-minor-kubernetes-release-for-example-181---190" id="markdown-toc-upgrading-a-minor-kubernetes-release-for-example-181---190">Upgrading a minor Kubernetes release for example 1.8.1 -&gt; 1.9.0</a>    <ul>
      <li><a href="#upgrade-etcd" id="markdown-toc-upgrade-etcd">Upgrade etcd</a></li>
      <li><a href="#upgrade-kubeapi-load-balancer" id="markdown-toc-upgrade-kubeapi-load-balancer">Upgrade kubeapi-load-balancer</a></li>
      <li><a href="#upgrade-kubernetes" id="markdown-toc-upgrade-kubernetes">Upgrade Kubernetes</a></li>
      <li><a href="#master-upgrades" id="markdown-toc-master-upgrades">Master Upgrades</a></li>
      <li><a href="#worker-upgrades" id="markdown-toc-worker-upgrades">Worker Upgrades</a>        <ul>
          <li><a href="#bluegreen-worker-upgrade" id="markdown-toc-bluegreen-worker-upgrade">Blue/green worker upgrade</a></li>
          <li><a href="#in-place-worker-upgrade" id="markdown-toc-in-place-worker-upgrade">In place worker upgrade</a></li>
        </ul>
      </li>
      <li><a href="#verify-upgrade" id="markdown-toc-verify-upgrade">Verify upgrade</a></li>
      <li><a href="#upgrade-flannel" id="markdown-toc-upgrade-flannel">Upgrade Flannel</a></li>
      <li><a href="#upgrade-easyrsa" id="markdown-toc-upgrade-easyrsa">Upgrade easyrsa</a></li>
    </ul>
  </li>
</ul>

<h2 id="before-you-begin">Before you begin</h2>

<p>This page assumes you have a working deployed cluster.</p>

<p class="warning"><strong>Warning:</strong> You should always back up all your data before attempting an upgrade.
Don’t forget to include the workload inside your cluster!
Refer to the <a href="/docs/getting-started-guides/ubuntu/backups">backup documentation</a>.</p>

<h2 id="patch-kubernetes-upgrades-for-example-190---191">Patch kubernetes upgrades for example 1.9.0 -&gt; 1.9.1</h2>

<p>Clusters are transparently upgraded to the latest Kubernetes patch release.
To be clear, a cluster deployed using the 1.9/stable channel
will transparently receive unattended upgrades for the 1.9.X Kubernetes
releases.
The upgrade causes no disruption to the operation of the cluster and requires
no intervention from a cluster administrator.
Each patch release is evaluated by the
Canonical Kubernetes Distribution team.
Once a patch release passes internal testing and is deemed safe for upgrade,
it is packaged in snap format and pushed to the stable channel.</p>

<h2 id="upgrading-a-minor-kubernetes-release-for-example-181---190">Upgrading a minor Kubernetes release for example 1.8.1 -&gt; 1.9.0</h2>

<p>The Kubernetes charms follow the Kubernetes releases. Please consult
your support plan on the upgrade frequency. Important operational considerations
and changes in behaviour will always be documented in the release notes.</p>

<h3 id="upgrade-etcd">Upgrade etcd</h3>

<p>Backing up etcd requires an export and snapshot, refer to the
<a href="/docs/getting-started-guides/ubuntu/backups">backup documentation</a> to create a snapshot.
After the snapshot, upgrade the etcd service with:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>juju upgrade-charm etcd
</code></pre></div></div>

<p>This will handle upgrades between minor versions of etcd. Instructions on how to upgrade from 2.x to 3.x can be found <a href="https://github.com/juju-solutions/bundle-canonical-kubernetes/wiki/Etcd-2.3-to-3.x-upgrade">here</a> in the juju-solutions wiki.</p>

<h3 id="upgrade-kubeapi-load-balancer">Upgrade kubeapi-load-balancer</h3>

<p>The Kubernetes Charms are generally all updated and released at the same time. A core part of a cluster on Ubuntu is the kubeapi-load-balancer component. Incorrect or missing changes there can have an effect on API availability and access controls. To ensure API service continuity for the master and workers when they are updated, this upgrade needs to precede them.</p>

<p>To upgrade the charm run:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>juju upgrade-charm kubeapi-load-balancer
</code></pre></div></div>

<h3 id="upgrade-kubernetes">Upgrade Kubernetes</h3>

<p>The Kubernetes Charms use snap channels to drive payloads.
The channels are defined by <code class="highlighter-rouge">X.Y/channel</code> where <code class="highlighter-rouge">X.Y</code> is the <code class="highlighter-rouge">major.minor</code> release
of Kubernetes (for example 1.9) and <code class="highlighter-rouge">channel</code> is one of the four following channels:</p>

<table>
  <thead>
    <tr>
      <th>Channel name</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>stable</td>
      <td>The latest stable released patch version of Kubernetes</td>
    </tr>
    <tr>
      <td>candidate</td>
      <td>Release candidate releases of Kubernetes</td>
    </tr>
    <tr>
      <td>beta</td>
      <td>Latest alpha or beta of Kubernetes for that minor release</td>
    </tr>
    <tr>
      <td>edge</td>
      <td>Nightly builds of that minor release of Kubernetes</td>
    </tr>
  </tbody>
</table>

<p>If a release isn’t available, the next highest channel is used.
For example, 1.9/beta will load <code class="highlighter-rouge">/candidate</code> or <code class="highlighter-rouge">/stable</code> depending on availability of release.
Development versions of Kubernetes are available in the edge channel for each minor release.
There is no guarantee that edge snaps will work with the current charms.</p>

<h3 id="master-upgrades">Master Upgrades</h3>

<p>First you need to upgrade the masters:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>juju upgrade-charm kubernetes-master
</code></pre></div></div>

<p class="note"><strong>Note:</strong> Always upgrade the masters before the workers.</p>

<p>Once the latest charm is deployed, the channel for Kubernetes can be selected by issuing the following:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>juju config kubernetes-master channel=1.x/stable
</code></pre></div></div>

<p>Where <code class="highlighter-rouge">x</code> is the minor version of Kubernetes. For example, <code class="highlighter-rouge">1.9/stable</code>. See above for Channel definitions.
Once you’ve configured kubernetes-master with the appropriate channel, run the upgrade action on each master:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>juju run-action kubernetes-master/0 upgrade
juju run-action kubernetes-master/1 upgrade
...
</code></pre></div></div>

<h3 id="worker-upgrades">Worker Upgrades</h3>

<p>Two methods of upgrading workers are supported.
<a href="http://martinfowler.com/bliki/BlueGreenDeployment.html">Blue/Green Deployment</a>
and upgrade-in-place. Both methods are provided for operational flexibility and both
are supported and tested. Blue/Green will require more hardware up front than in-place,
but is a safer upgrade route.</p>

<h4 id="bluegreen-worker-upgrade">Blue/green worker upgrade</h4>

<p>Given a deployment where the workers are named kubernetes-alpha.</p>

<p>Deploy new workers:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>juju deploy kubernetes-beta
</code></pre></div></div>

<p>Pause the old workers so your workload migrates:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>juju run-action kubernetes-alpha/# pause
</code></pre></div></div>

<p>Verify old workloads have migrated with:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl get pod -o wide
</code></pre></div></div>

<p>Tear down old workers with:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>juju remove-application kubernetes-alpha
</code></pre></div></div>

<h4 id="in-place-worker-upgrade">In place worker upgrade</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>juju upgrade-charm kubernetes-worker
juju config kubernetes-worker channel=1.x/stable
</code></pre></div></div>

<p>Where <code class="highlighter-rouge">x</code> is the minor version of Kubernetes. For example, <code class="highlighter-rouge">1.9/stable</code>.
See above for Channel definitions. Once you’ve configured kubernetes-worker with the appropriate channel,
run the upgrade action on each worker:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>juju run-action kubernetes-worker/0 upgrade
juju run-action kubernetes-worker/1 upgrade
...
</code></pre></div></div>

<h3 id="verify-upgrade">Verify upgrade</h3>

<p><code class="highlighter-rouge">kubectl version</code> should return the newer version.</p>

<p>It is recommended to rerun a <a href="/docs/getting-started-guides/ubuntu/validation">cluster validation</a>
to ensure that the cluster upgrade has successfully completed.</p>

<h3 id="upgrade-flannel">Upgrade Flannel</h3>

<p>Upgrading flannel can be done at any time, it is independent of Kubernetes upgrades.
Be advised that networking is interrupted during the upgrade. You can initiate a flannel upgrade with:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>juju upgrade-charm flannel
</code></pre></div></div>

<h3 id="upgrade-easyrsa">Upgrade easyrsa</h3>

<p>Upgrading easyrsa can be done at any time, it is independent of Kubernetes upgrades.
Upgrading easyrsa should result in zero downtime as it is not a running service:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>juju upgrade-charm easyrsa
</code></pre></div></div>



        <p><a href=""><img src="https://kubernetes-site.appspot.com/UA-36037335-10/GitHub/docs/getting-started-guides/ubuntu/upgrades.md?pixel" alt="Analytics" /></a></p>
        
        
        <script type="text/javascript">
            PDRTJS_settings_8345992 = {
                "id" : "8345992",
                "unique_id" : "/docs/getting-started-guides/ubuntu/upgrades/",
                "title" : "Upgrades",
                "permalink" : "https://kubernetes.io/docs/getting-started-guides/ubuntu/upgrades/"
            };
            (function(d,c,j){if(!document.getElementById(j)){var pd=d.createElement(c),s;pd.id=j;pd.src=('https:'==document.location.protocol)?'https://polldaddy.com/js/rating/rating.js':'http://i0.poll.fm/js/rating/rating.js';s=document.getElementsByTagName(c)[0];s.parentNode.insertBefore(pd,s);}}(document,'script','pd-rating-js'));
        </script>
        <a href="" onclick="window.open('https://github.com/kubernetes/website/issues/new?title=Issue%20with%20' +
        'k8s.io'+window.location.pathname)" class="button issue">Create an Issue</a>
        
        
          <a href="/editdocs#docs/getting-started-guides/ubuntu/upgrades.md" class="button issue">Edit this Page</a>
        
    
    </div>
</section>

<footer>
    <main class="light-text">
        <nav>
            <a href="/docs/tutorials/stateless-application/hello-minikube/">Get Started</a>
            <a href="/docs/home/">Documentation</a>
            <a href="http://blog.kubernetes.io/">Blog</a>
            <a href="/partners/">Partners</a>
            <a href="/community/">Community</a>
            <a href="/case-studies/">Case Studies</a>
        </nav>
        <div class="social">
            <div>
                <a href="https://twitter.com/kubernetesio" class="twitter"><span>twitter</span></a>
                <a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
                <a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
            </div>
            <div>
                <a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
                <a href="https://groups.google.com/forum/#!forum/kubernetes-users" class="mailing-list"><span>Mailing List</span></a>
                <a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
            </div>
            <div>
                <a href="/docs/setup/pick-right-solution/" class="button">Get Kubernetes</a>
                <a href="https://github.com/kubernetes/kubernetes" class="button">Contribute</a>
            </div>
        </div>
        <div id="miceType" class="center">
            &copy; 2018 The Kubernetes Authors | Documentation Distributed under <a href="https://git.k8s.io/website/LICENSE" class="light-text">CC BY 4.0</a>
        </div>
        <div id="miceType" class="center">
            Copyright &copy; 2018 The Linux Foundation&reg;. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage" class="light-text">Trademark Usage page</a>
        </div>
    </main>
</footer>

<button class="flyout-button" onclick="kub.toggleToc()"></button>

<style>
.cse .gsc-control-cse, .gsc-control-cse, {
    padding: 0;
}
  .gsc-control-cse table, .gsc-control-cse-en table {
      margin:0px !important;
  }
  .gsc-above-wrapper-area {
      border-bottom: 0;
  }
</style>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-36037335-10', 'auto');
ga('send', 'pageview');

// hide docs nav area if no nav is present, or if nav only contains a link to the current page
(function () {
    window.addEventListener('DOMContentLoaded', init)

        // play nice with our neighbors
        function init() {
            window.removeEventListener('DOMContentLoaded', init)
                hideNav()
        }

    function hideNav(toc){
        if (!toc) toc = document.querySelector('#docsToc')
        if (!toc) return
            var container = toc.querySelector('.container')

                // container is built dynamically, so it may not be present on the first runloop
                if (container) {
                    if (container.childElementCount === 0 || toc.querySelectorAll('a.item').length === 1) {
                        toc.style.display = 'none'
                            document.getElementById('docsContent').style.width = '100%'
                    }
                } else {
                    requestAnimationFrame(function () {
                        hideNav(toc)
                    })
                }
    }
})();
</script>

<!-- Commenting out AnswerDash for now; we need to work on our list of questions/answers/design first
    <!-- Start of AnswerDash script <script>var AnswerDash;!function(e,t,n,s,a){if(!t.getElementById(s)){var i,r=t.createElement(n),c=t.getElementsByTagName(n)[0];e[a]||(i=e[a]=function(){i.__oninit.push(arguments)},i.__oninit=[]),r.type="text/javascript",r.async=!0,r.src="https://p1.answerdash.com/answerdash.min.js?siteid=756",r.setAttribute("id",s),c.parentNode.insertBefore(r,c)}}(window,document,"script","answerdash-script","AnswerDash");</script> <!-- End of AnswerDash script -->


</body>
</html>
