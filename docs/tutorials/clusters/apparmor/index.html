
  
    
    

  

  
    
    

  

  
    
    

  

  
    
    

  

  
    

<!Doctype html>
<html id="docs" class="Tutorials">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="/images/favicon.png">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto+Mono">
    <link rel="stylesheet" type="text/css" href="/css/styles.css"><!-- default styles.css on -->
    <link rel="stylesheet" type="text/css" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css">
    <link rel="stylesheet" type="text/css" href="/css/callouts.css">
    <link rel="stylesheet" type="text/css" href="/css/custom-jekyll/tags.css">
    
    
    <!-- no custom css detected -->

    
    <meta name="description" content="AppArmor" />
    

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js"></script>
    <script src="/js/script.js"></script>
    <script src="/js/custom-jekyll/tags.js"></script>
    <!-- no custom js detected -->
    <!-- Begin Jekyll SEO tag v2.4.0 -->
<title>AppArmor | Kubernetes</title>
<meta name="generator" content="Jekyll v3.6.0" />
<meta property="og:title" content="AppArmor" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Production-Grade Container Orchestration" />
<meta property="og:description" content="Production-Grade Container Orchestration" />
<link rel="canonical" href="http://0.0.0.0:4000/docs/tutorials/clusters/apparmor/" />
<meta property="og:url" content="http://0.0.0.0:4000/docs/tutorials/clusters/apparmor/" />
<meta property="og:site_name" content="Kubernetes" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@kubernetesio" />
<script type="application/ld+json">
{"description":"Production-Grade Container Orchestration","@type":"WebPage","url":"http://0.0.0.0:4000/docs/tutorials/clusters/apparmor/","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://0.0.0.0:4000/images/favicon.png"}},"headline":"AppArmor","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>


<body>

<div id="cellophane" onclick="kub.toggleMenu()"></div>

<header>
    <a href="/" class="logo"></a>

    <div class="nav-buttons" data-auto-burger="primary">
        <ul class="global-nav">
            <li><a href="/docs/home/">Documentation</a></li>
            <li><a href="http://blog.kubernetes.io/">Blog</a></li>
            <li><a href="/partners/">Partners</a></li>
            <li><a href="/community/">Community</a></li>
            <li><a href="/case-studies/">Case Studies</a></li>
            <li>
                <a href="#">
                    v1.9 <span class="ui-icon ui-icon-carat-1-s"></span>
                </a>
                <ul>
                
                    
                    <li><a href="https://kubernetes.io/docs/tutorials/clusters/apparmor/">v1.9</a></li>
                    
                
                    
                    <li><a href="https://v1-8.docs.kubernetes.io/docs/tutorials/clusters/apparmor/">v1.8</a></li>
                    
                
                    
                    <li><a href="https://v1-7.docs.kubernetes.io/docs/tutorials/clusters/apparmor/">v1.7</a></li>
                    
                
                    
                    <li><a href="https://v1-6.docs.kubernetes.io/docs/tutorials/clusters/apparmor/">v1.6</a></li>
                    
                
                    
                    <li><a href="https://v1-5.docs.kubernetes.io/docs/tutorials/clusters/apparmor/">v1.5</a></li>
                    
                
                </ul>
            </li>
        </ul>
        <!-- <a href="/docs/home" class="button" id="viewDocs" data-auto-burger-exclude>View Documentation</a> -->
        <a href="/docs/tutorials/kubernetes-basics/" class="button" id="tryKubernetes" data-auto-burger-exclude>Try Kubernetes</a>
        <button id="hamburger" onclick="kub.toggleMenu()" data-auto-burger-exclude><div></div></button>
    </div>

    <nav id="mainNav">
        <main data-auto-burger="primary">
        <div class="nav-box">
            <h3><a href="/docs/tutorials/stateless-application/hello-minikube/">Get Started</a></h3>
            <p>Ready to get your hands dirty? Build a simple Kubernetes cluster that runs "Hello World" for Node.js.</p>
        </div>
        <div class="nav-box">
            <h3><a href="/docs/home/">Documentation</a></h3>
            <p>Learn how to use Kubernetes with the use of walkthroughs, samples, and reference documentation. You can even <a href="/editdocs/" data-auto-burger-exclude>help contribute to the docs</a>!</p>
        </div>
        <div class="nav-box">
            <h3><a href="/community/">Community</a></h3>
            <p>If you need help, you can connect with other Kubernetes users and the Kubernetes authors, attend community events, and watch video presentations from around the web.</p>
        </div>
        <div class="nav-box">
            <h3><a href="http://blog.kubernetes.io">Blog</a></h3>
            <p>Read the latest news for Kubernetes and the containers space in general, and get technical how-tos hot off the presses.</p>
        </div>
        </main>
        <main data-auto-burger="primary">
        <div class="left">
            <h5 class="github-invite">Interested in hacking on the core Kubernetes code base?</h5>
            <a href="https://github.com/kubernetes/kubernetes" class="button" data-auto-burger-exclude>View On Github</a>
        </div>

        <div class="right">
            <h5 class="github-invite">Explore the community</h5>
            <div class="social">
                <a href="https://twitter.com/kubernetesio" class="twitter"><span>Twitter</span></a>
                <a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
                <a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
                <a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
                <a href="https://groups.google.com/forum/#!forum/kubernetes-users" class="mailing-list"><span>Mailing List</span></a>
                <a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
            </div>
        </div>
        <div class="clear" style="clear: both"></div>
        </main>
    </nav>
</header>


<!--  HERO  -->
<section id="hero" class="light-text">
  <h1>Tutorials</h1>
  <h5>Detailed walkthroughs of common Kubernetes operations and workflows.</h5>
  <div id="vendorStrip" class="light-text">
    <ul>
      <li><a href="/docs/home/" >HOME</a></li>
      <li><a href="/docs/setup/" >SETUP</a></li>
      <li><a href="/docs/concepts/" >CONCEPTS</a></li>
      <li><a href="/docs/tasks/" >TASKS</a></li>
      <li><a href="/docs/tutorials/" class="YAH">TUTORIALS</a></li>
      <li><a href="/docs/reference/" >REFERENCE</a></li>
    </ul>
    <div id="searchBox">
      <input type="text" id="search" placeholder="Search" onkeydown="if (event.keyCode==13) window.location.replace('/docs/search/?q=' + this.value)" autofocus="autofocus">
    </div>
  </div>
</section>




<section id="encyclopedia">
  <div id="docsToc">
        <div class="pi-accordion">
          
  

    

    
      <a class="item" data-title="Tutorials" href="/docs/tutorials/"></a>
    
  

  
    <div class="item" data-title="Kubernetes Basics">
      <div class="container">
        
  

    

    
      <a class="item" data-title="概述" href="/docs/tutorials/kubernetes-basics/"></a>
    
  

  
    <div class="item" data-title="1. Create a Cluster">
      <div class="container">
        
  

    

    
      <a class="item" data-title="使用 Minikube 创建一个集群" href="/docs/tutorials/kubernetes-basics/cluster-intro/"></a>
    
  

  

    

    
      <a class="item" data-title="互动教程 - 创建集群" href="/docs/tutorials/kubernetes-basics/cluster-interactive/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="2. Deploy an App">
      <div class="container">
        
  

    

    
      <a class="item" data-title="使用 kubectl 创建部署" href="/docs/tutorials/kubernetes-basics/deploy-intro/"></a>
    
  

  

    

    
      <a class="item" data-title="互动教程 - 部署应用程序" href="/docs/tutorials/kubernetes-basics/deploy-interactive/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="3. Explore Your App">
      <div class="container">
        
  

    

    
      <a class="item" data-title="查看 Pods 和节点" href="/docs/tutorials/kubernetes-basics/explore-intro/"></a>
    
  

  

    

    
      <a class="item" data-title="互动教程 - 应用程序探索" href="/docs/tutorials/kubernetes-basics/explore-interactive/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="4. Expose Your App Publicly">
      <div class="container">
        
  

    

    
      <a class="item" data-title="使用服务发布您的应用程序" href="/docs/tutorials/kubernetes-basics/expose-intro/"></a>
    
  

  

    

    
      <a class="item" data-title="互动教程 - 应用外部可见" href="/docs/tutorials/kubernetes-basics/expose-interactive/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="5. Scale Your App">
      <div class="container">
        
  

    

    
      <a class="item" data-title="运行应用程序的多个实例" href="/docs/tutorials/kubernetes-basics/scale-intro/"></a>
    
  

  

    

    
      <a class="item" data-title="互动教程 - 扩展您的应用程序" href="/docs/tutorials/kubernetes-basics/scale-interactive/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="6. Update Your App">
      <div class="container">
        
  

    

    
      <a class="item" data-title="执行滚动更新" href="/docs/tutorials/kubernetes-basics/update-intro/"></a>
    
  

  

    

    
      <a class="item" data-title="互动教程 - 更新您的应用程序" href="/docs/tutorials/kubernetes-basics/update-interactive/"></a>
    
  


      </div>
    </div>
  


      </div>
    </div>
  

  
    <div class="item" data-title="Online Training Courses">
      <div class="container">
        
  

    

    
      <a class="item" data-title="Kubernetes 在线培训概述" href="/docs/tutorials/online-training/overview/"></a>
    
  

  

    

    
      <a class="item" data-title="Scalable Microservices with Kubernetes (Udacity)" href="https://www.udacity.com/course/scalable-microservices-with-kubernetes--ud615"></a>
    
  

  

    

    
      <a class="item" data-title="Introduction to Kubernetes (edX)" href="https://www.edx.org/course/introduction-kubernetes-linuxfoundationx-lfs158x#"></a>
    
  


      </div>
    </div>
  

  

    

    
      <a class="item" data-title="Hello Minikube" href="/docs/tutorials/stateless-application/hello-minikube/"></a>
    
  

  

    

    
      <a class="item" data-title="Kubernetes 101" href="/docs/user-guide/walkthrough/"></a>
    
  

  

    

    
      <a class="item" data-title="Kubernetes 201" href="/docs/user-guide/walkthrough/k8s201/"></a>
    
  

  
    <div class="item" data-title="Configuration">
      <div class="container">
        
  

    

    
      <a class="item" data-title="Configuring Redis using a ConfigMap" href="/docs/tutorials/configuration/configure-redis-using-configmap/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Stateless Applications">
      <div class="container">
        
  

    

    
      <a class="item" data-title="使用 Deployment 运行无状态应用" href="/docs/tasks/run-application/run-stateless-application-deployment/"></a>
    
  

  

    

    
      <a class="item" data-title="示例：使用 Redis 的 PHP Guestbook 应用程序" href="/docs/tutorials/stateless-application/guestbook/"></a>
    
  

  

    

    
      <a class="item" data-title="使用 service 访问群集中的应用程序" href="/docs/tasks/access-application-cluster/service-access-application-cluster/"></a>
    
  

  

    

    
      <a class="item" data-title="Exposing an External IP Address to Access an Application in a Cluster" href="/docs/tutorials/stateless-application/expose-external-ip-address/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Stateful Applications">
      <div class="container">
        
  

    

    
      <a class="item" data-title="StatefulSet基本使用" href="/docs/tutorials/stateful-application/basic-stateful-set/"></a>
    
  

  

    

    
      <a class="item" data-title="Run a Single-Instance Stateful Application" href="/docs/tasks/run-application/run-single-instance-stateful-application/"></a>
    
  

  

    

    
      <a class="item" data-title="Run a Replicated Stateful Application" href="/docs/tasks/run-application/run-replicated-stateful-application/"></a>
    
  

  

    

    
      <a class="item" data-title="示例：基于 Persistent Volume 部署 WordPress 和 MySQL" href="/docs/tutorials/stateful-application/mysql-wordpress-persistent-volume/"></a>
    
  

  

    

    
      <a class="item" data-title="示例：使用 Stateful Sets 部署 Cassandra" href="/docs/tutorials/stateful-application/cassandra/"></a>
    
  

  

    

    
      <a class="item" data-title="运行 ZooKeeper， 一个 CP 分布式系统" href="/docs/tutorials/stateful-application/zookeeper/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Clusters">
      <div class="container">
        
  

    

    
      <a class="item" data-title="AppArmor" href="/docs/tutorials/clusters/apparmor/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Services">
      <div class="container">
        
  

    

    
      <a class="item" data-title="使用 Source IP" href="/docs/tutorials/services/source-ip/"></a>
    
  


      </div>
    </div>
  


        </div> <!-- /pi-accordion -->
    <button class="push-menu-close-button" onclick="kub.toggleToc()"></button>
  </div> <!-- /docsToc -->

  <div id="docsContent">
        <p><a href="/editdocs#docs/tutorials/clusters/apparmor.md" id="editPageButton">Edit This Page</a></p>

        
          <h1>AppArmor</h1>
        

        
<p><strong>FEATURE STATE:</strong> <code class="highlighter-rouge">Kubernetes v1.4</code> <a href="#" id="feature-state-dialog-link" class="ui-state-default ui-corner-all"><span class="ui-icon ui-icon-newwin"></span>beta</a></p>
<div id="feature-state-dialog" class="ui-dialog-content" title="beta">
  <p>This feature is currently in a <em>beta</em> state, meaning:</p>
  <ul>
    <li>The version names contain beta (e.g. v2beta3).</li>
    <li>Code is well tested. Enabling the feature is considered safe. Enabled by default.</li>
    <li>Support for the overall feature will not be dropped, though details may change.</li>
    <li>The schema and/or semantics of objects may change in incompatible ways in a subsequent beta or stable release. When this happens, we will provide instructions for migrating to the next version. This may require deleting, editing, and re-creating API objects. The editing process may require some thought. This may require downtime for applications that rely on the feature.</li>
    <li>Recommended for only non-business-critical uses because of potential for incompatible changes in subsequent releases. If you have multiple clusters that can be upgraded independently, you may be able to relax this restriction.</li>
    <li><strong>Please do try our beta features and give feedback on them! After they exit beta, it may not be practical for us to make more changes.</strong></li>
  </ul>
</div>
<script>
$(function(){
    
    $( "#feature-state-dialog" ).dialog({
        autoOpen: false,
        width: 600,
        buttons: [
            {
                text: "Ok",
                click: function() {
                    $( this ).dialog( "close" );
                }
            }
        ]
    });

    // Link to open the dialog
    $( "#feature-state-dialog-link" ).click(function( event ) {
        $( "#feature-state-dialog" ).dialog( "open" );
        event.preventDefault();
    });

});
</script>

<p>AppArmor is a Linux kernel security module that supplements the standard Linux user and group based
permissions to confine programs to a limited set of resources. AppArmor can be configured for any
application to reduce its potential attack surface and provide greater in-depth defense. It is
configured through profiles tuned to whitelist the access needed by a specific program or container,
such as Linux capabilities, network access, file permissions, etc. Each profile can be run in either
<em>enforcing</em> mode, which blocks access to disallowed resources, or <em>complain</em> mode, which only reports
violations.</p>

<p>AppArmor can help you to run a more secure deployment by restricting what containers are allowed to
do, and/or provide better auditing through system logs. However, it is important to keep in mind
that AppArmor is not a silver bullet and can only do so much to protect against exploits in your
application code. It is important to provide good, restrictive profiles, and harden your
applications and cluster from other angles as well.</p>

<ul id="markdown-toc">
  <li><a href="#objectives" id="markdown-toc-objectives">Objectives</a></li>
  <li><a href="#before-you-begin" id="markdown-toc-before-you-begin">Before you begin</a></li>
  <li><a href="#securing-a-pod" id="markdown-toc-securing-a-pod">Securing a Pod</a></li>
  <li><a href="#example" id="markdown-toc-example">Example</a></li>
  <li><a href="#administration" id="markdown-toc-administration">Administration</a>    <ul>
      <li><a href="#setting-up-nodes-with-profiles" id="markdown-toc-setting-up-nodes-with-profiles">Setting up nodes with profiles</a></li>
      <li><a href="#restricting-profiles-with-the-podsecuritypolicy" id="markdown-toc-restricting-profiles-with-the-podsecuritypolicy">Restricting profiles with the PodSecurityPolicy</a></li>
      <li><a href="#disabling-apparmor" id="markdown-toc-disabling-apparmor">Disabling AppArmor</a></li>
      <li><a href="#upgrading-to-kubernetes-v14-with-apparmor" id="markdown-toc-upgrading-to-kubernetes-v14-with-apparmor">Upgrading to Kubernetes v1.4 with AppArmor</a></li>
      <li><a href="#upgrade-path-to-general-availability" id="markdown-toc-upgrade-path-to-general-availability">Upgrade path to General Availability</a></li>
    </ul>
  </li>
  <li><a href="#authoring-profiles" id="markdown-toc-authoring-profiles">Authoring Profiles</a></li>
  <li><a href="#api-reference" id="markdown-toc-api-reference">API Reference</a>    <ul>
      <li><a href="#pod-annotation" id="markdown-toc-pod-annotation">Pod Annotation</a></li>
      <li><a href="#profile-reference" id="markdown-toc-profile-reference">Profile Reference</a></li>
      <li><a href="#podsecuritypolicy-annotations" id="markdown-toc-podsecuritypolicy-annotations">PodSecurityPolicy Annotations</a></li>
    </ul>
  </li>
  <li><a href="#whats-next" id="markdown-toc-whats-next">What’s next</a></li>
</ul>

<h2 id="objectives">Objectives</h2>

<ul>
  <li>See an example of how to load a profile on a node</li>
  <li>Learn how to enforce the profile on a Pod</li>
  <li>Learn how to check that the profile is loaded</li>
  <li>See what happens when a profile is violated</li>
  <li>See what happens when a profile cannot be loaded</li>
</ul>

<h2 id="before-you-begin">Before you begin</h2>

<p>Make sure:</p>

<ol>
  <li>
    <p>Kubernetes version is at least v1.4 – Kubernetes support for AppArmor was added in
v1.4. Kubernetes components older than v1.4 are not aware of the new AppArmor annotations, and
will <strong>silently ignore</strong> any AppArmor settings that are provided. To ensure that your Pods are
receiving the expected protections, it is important to verify the Kubelet version of your nodes:</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl get nodes <span class="nt">-o</span><span class="o">=</span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">$'{range .items[*]}{@.metadata.name}: {@.status.nodeInfo.kubeletVersion}</span><span class="se">\n</span><span class="s1">{end}'</span>
gke-test-default-pool-239f5d02-gyn2: v1.4.0
gke-test-default-pool-239f5d02-x1kf: v1.4.0
gke-test-default-pool-239f5d02-xwux: v1.4.0
</code></pre></div>    </div>
  </li>
  <li>
    <p>AppArmor kernel module is enabled – For the Linux kernel to enforce an AppArmor profile, the
AppArmor kernel module must be installed and enabled. Several distributions enable the module by
default, such as Ubuntu and SUSE, and many others provide optional support. To check whether the
module is enabled, check the <code class="highlighter-rouge">/sys/module/apparmor/parameters/enabled</code> file:</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cat</span> /sys/module/apparmor/parameters/enabled
Y
</code></pre></div>    </div>

    <p>If the Kubelet contains AppArmor support (&gt;= v1.4), it will refuse to run a Pod with AppArmor
options if the kernel module is not enabled.</p>

    <p><strong>Note:</strong> Ubuntu carries many AppArmor patches that have not been merged into the upstream Linux
 kernel, including patches that add additional hooks and features. Kubernetes has only been
 tested with the upstream version, and does not promise support for other features.</p>
  </li>
  <li>
    <p>Container runtime is Docker – Currently the only Kubernetes-supported container runtime that
also supports AppArmor is Docker. As more runtimes add AppArmor support, the options will be
expanded. You can verify that your nodes are running docker with:</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl get nodes <span class="nt">-o</span><span class="o">=</span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">$'{range .items[*]}{@.metadata.name}: {@.status.nodeInfo.containerRuntimeVersion}</span><span class="se">\n</span><span class="s1">{end}'</span>
gke-test-default-pool-239f5d02-gyn2: docker://1.11.2
gke-test-default-pool-239f5d02-x1kf: docker://1.11.2
gke-test-default-pool-239f5d02-xwux: docker://1.11.2
</code></pre></div>    </div>

    <p>If the Kubelet contains AppArmor support (&gt;= v1.4), it will refuse to run a Pod with AppArmor
options if the runtime is not Docker.</p>
  </li>
  <li>
    <p>Profile is loaded – AppArmor is applied to a Pod by specifying an AppArmor profile that each
container should be run with. If any of the specified profiles is not already loaded in the
kernel, the Kubelet (&gt;= v1.4) will reject the Pod. You can view which profiles are loaded on a
node by checking the <code class="highlighter-rouge">/sys/kernel/security/apparmor/profiles</code> file. For example:</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ssh gke-test-default-pool-239f5d02-gyn2 <span class="s2">"sudo cat /sys/kernel/security/apparmor/profiles | sort"</span>
apparmor-test-deny-write <span class="o">(</span>enforce<span class="o">)</span>
apparmor-test-audit-write <span class="o">(</span>enforce<span class="o">)</span>
docker-default <span class="o">(</span>enforce<span class="o">)</span>
k8s-nginx <span class="o">(</span>enforce<span class="o">)</span>
</code></pre></div>    </div>

    <p>For more details on loading profiles on nodes, see
<a href="#setting-up-nodes-with-profiles">Setting up nodes with profiles</a>.</p>
  </li>
</ol>

<p>As long as the Kubelet version includes AppArmor support (&gt;= v1.4), the Kubelet will reject a Pod
with AppArmor options if any of the prerequisites are not met. You can also verify AppArmor support
on nodes by checking the node ready condition message (though this is likely to be removed in a
later release):</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl get nodes <span class="nt">-o</span><span class="o">=</span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">$'{range .items[*]}{@.metadata.name}: {.status.conditions[?(@.reason=="KubeletReady")].message}</span><span class="se">\n</span><span class="s1">{end}'</span>
gke-test-default-pool-239f5d02-gyn2: kubelet is posting ready status. AppArmor enabled
gke-test-default-pool-239f5d02-x1kf: kubelet is posting ready status. AppArmor enabled
gke-test-default-pool-239f5d02-xwux: kubelet is posting ready status. AppArmor enabled
</code></pre></div></div>

<h2 id="securing-a-pod">Securing a Pod</h2>

<p><strong>Note:</strong> AppArmor is currently in beta, so options are specified as annotations. Once support graduates to
general availability, the annotations will be replaced with first-class fields (more details in
<a href="#upgrade-path-to-general-availability">Upgrade path to GA</a>).</p>

<p>AppArmor profiles are specified <em>per-container</em>. To specify the AppArmor profile to run a Pod
container with, add an annotation to the Pod’s metadata:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">container.apparmor.security.beta.kubernetes.io/&lt;container_name&gt;</span><span class="pi">:</span> <span class="s">&lt;profile_ref&gt;</span>
</code></pre></div></div>

<p>Where <code class="highlighter-rouge">&lt;container_name&gt;</code> is the name of the container to apply the profile to, and <code class="highlighter-rouge">&lt;profile_ref&gt;</code>
specifies the profile to apply. The <code class="highlighter-rouge">profile_ref</code> can be one of:</p>

<ul>
  <li><code class="highlighter-rouge">runtime/default</code> to apply the runtime’s default profile</li>
  <li><code class="highlighter-rouge">localhost/&lt;profile_name&gt;</code> to apply the profile loaded on the host with the name <code class="highlighter-rouge">&lt;profile_name&gt;</code></li>
  <li><code class="highlighter-rouge">unconfined</code> to indicate that no profiles will be loaded</li>
</ul>

<p>See the <a href="#api-reference">API Reference</a> for the full details on the annotation and profile name formats.</p>

<p>Kubernetes AppArmor enforcement works by first checking that all the prerequisites have been
met, and then forwarding the profile selection to the container runtime for enforcement. If the
prerequisites have not been met, the Pod will be rejected, and will not run.</p>

<p>To verify that the profile was applied, you can look for the AppArmor security option listed in the container created event:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl get events | <span class="nb">grep </span>Created
22s        22s         1         hello-apparmor     Pod       spec.containers<span class="o">{</span>hello<span class="o">}</span>   Normal    Created     <span class="o">{</span>kubelet e2e-test-stclair-minion-group-31nt<span class="o">}</span>   Created container with docker id 269a53b202d3<span class="p">;</span> Security:[seccomp<span class="o">=</span>unconfined <span class="nv">apparmor</span><span class="o">=</span>k8s-apparmor-example-deny-write]
</code></pre></div></div>

<p>You can also verify directly that the container’s root process is running with the correct profile by checking its proc attr:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl <span class="nb">exec</span> &lt;pod_name&gt; <span class="nb">cat</span> /proc/1/attr/current
k8s-apparmor-example-deny-write <span class="o">(</span>enforce<span class="o">)</span>
</code></pre></div></div>

<h2 id="example">Example</h2>

<p><em>This example assumes you have already set up a cluster with AppArmor support.</em></p>

<p>First, we need to load the profile we want to use onto our nodes. The profile we’ll use simply
denies all file writes:</p>

<table class="includecode">
    <thead>
        <tr>
            <th>
                <a href="https://raw.githubusercontent.com/kubernetes/website/master/docs/tutorials/clusters/deny-write.profile" download="deny-write.profile">
                    <code>deny-write.profile</code>
                </a>
                <img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('deny-write.profile')" title="Copy deny-write.profile to clipboard" />
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
<div id="deny-write.profile" class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#include &lt;tunables/global&gt;

profile k8s-apparmor-example-deny-write flags=(attach_disconnected) {
  #include &lt;abstractions/base&gt;

  file,

  # Deny all file writes.
  deny /** w,
}
</code></pre></div></div>
</td>
        </tr>
    </tbody>
</table>

<p>Since we don’t know where the Pod will be scheduled, we’ll need to load the profile on all our
nodes. For this example we’ll just use SSH to install the profiles, but other approaches are
discussed in <a href="#setting-up-nodes-with-profiles">Setting up nodes with profiles</a>.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ NODES</span><span class="o">=(</span>
    <span class="c"># The SSH-accessible domain names of your nodes</span>
    gke-test-default-pool-239f5d02-gyn2.us-central1-a.my-k8s
    gke-test-default-pool-239f5d02-x1kf.us-central1-a.my-k8s
    gke-test-default-pool-239f5d02-xwux.us-central1-a.my-k8s<span class="o">)</span>
<span class="nv">$ </span><span class="k">for </span>NODE <span class="k">in</span> <span class="k">${</span><span class="nv">NODES</span><span class="p">[*]</span><span class="k">}</span><span class="p">;</span> <span class="k">do </span>ssh <span class="nv">$NODE</span> <span class="s1">'sudo apparmor_parser -q &lt;&lt;EOF
#include &lt;tunables/global&gt;

profile k8s-apparmor-example-deny-write flags=(attach_disconnected) {
  #include &lt;abstractions/base&gt;

  file,

  # Deny all file writes.
  deny /** w,
}
EOF'</span>
<span class="k">done</span>
</code></pre></div></div>

<p>Next, we’ll run a simple “Hello AppArmor” pod with the deny-write profile:</p>

<table class="includecode">
    <thead>
        <tr>
            <th>
                <a href="https://raw.githubusercontent.com/kubernetes/website/master/docs/tutorials/clusters/hello-apparmor-pod.yaml" download="hello-apparmor-pod.yaml">
                    <code>hello-apparmor-pod.yaml</code>
                </a>
                <img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('hello-apparmor-pod.yaml')" title="Copy hello-apparmor-pod.yaml to clipboard" />
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
<div id="hello-apparmor-pod.yaml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Pod</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">hello-apparmor</span>
  <span class="na">annotations</span><span class="pi">:</span>
    <span class="c1"># Tell Kubernetes to apply the AppArmor profile "k8s-apparmor-example-deny-write".</span>
    <span class="c1"># Note that this is ignored if the Kubernetes node is not running version 1.4 or greater.</span>
    <span class="s">container.apparmor.security.beta.kubernetes.io/hello</span><span class="pi">:</span> <span class="s">localhost/k8s-apparmor-example-deny-write</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">containers</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">hello</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">busybox</span>
    <span class="na">command</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">sh"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">-c"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">echo</span><span class="nv"> </span><span class="s">'Hello</span><span class="nv"> </span><span class="s">AppArmor!'</span><span class="nv"> </span><span class="s">&amp;&amp;</span><span class="nv"> </span><span class="s">sleep</span><span class="nv"> </span><span class="s">1h"</span> <span class="pi">]</span>
</code></pre></div></div>
</td>
        </tr>
    </tbody>
</table>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl create <span class="nt">-f</span> ./hello-apparmor-pod.yaml
</code></pre></div></div>

<p>If we look at the pod events, we can see that the Pod container was created with the AppArmor
profile “k8s-apparmor-example-deny-write”:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl get events | <span class="nb">grep </span>hello-apparmor
14s        14s         1         hello-apparmor   Pod                                Normal    Scheduled   <span class="o">{</span>default-scheduler <span class="o">}</span>                           Successfully assigned hello-apparmor to gke-test-default-pool-239f5d02-gyn2
14s        14s         1         hello-apparmor   Pod       spec.containers<span class="o">{</span>hello<span class="o">}</span>   Normal    Pulling     <span class="o">{</span>kubelet gke-test-default-pool-239f5d02-gyn2<span class="o">}</span>   pulling image <span class="s2">"busybox"</span>
13s        13s         1         hello-apparmor   Pod       spec.containers<span class="o">{</span>hello<span class="o">}</span>   Normal    Pulled      <span class="o">{</span>kubelet gke-test-default-pool-239f5d02-gyn2<span class="o">}</span>   Successfully pulled image <span class="s2">"busybox"</span>
13s        13s         1         hello-apparmor   Pod       spec.containers<span class="o">{</span>hello<span class="o">}</span>   Normal    Created     <span class="o">{</span>kubelet gke-test-default-pool-239f5d02-gyn2<span class="o">}</span>   Created container with docker id 06b6cd1c0989<span class="p">;</span> Security:[seccomp<span class="o">=</span>unconfined <span class="nv">apparmor</span><span class="o">=</span>k8s-apparmor-example-deny-write]
13s        13s         1         hello-apparmor   Pod       spec.containers<span class="o">{</span>hello<span class="o">}</span>   Normal    Started     <span class="o">{</span>kubelet gke-test-default-pool-239f5d02-gyn2<span class="o">}</span>   Started container with docker id 06b6cd1c0989
</code></pre></div></div>

<p>We can verify that the container is actually running with that profile by checking its proc attr:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl <span class="nb">exec </span>hello-apparmor <span class="nb">cat</span> /proc/1/attr/current
k8s-apparmor-example-deny-write <span class="o">(</span>enforce<span class="o">)</span>
</code></pre></div></div>

<p>Finally, we can see what happens if we try to violate the profile by writing to a file:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl <span class="nb">exec </span>hello-apparmor touch /tmp/test
touch: /tmp/test: Permission denied
error: error executing remote <span class="nb">command</span>: <span class="nb">command </span>terminated with non-zero <span class="nb">exit </span>code: Error executing <span class="k">in </span>Docker Container: 1
</code></pre></div></div>

<p>To wrap up, let’s look at what happens if we try to specify a profile that hasn’t been loaded:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl create <span class="nt">-f</span> /dev/stdin <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh">
apiVersion: v1
kind: Pod
metadata:
  name: hello-apparmor-2
  annotations:
    container.apparmor.security.beta.kubernetes.io/hello: localhost/k8s-apparmor-example-allow-write
spec:
  containers:
  - name: hello
    image: busybox
    command: [ "sh", "-c", "echo 'Hello AppArmor!' &amp;&amp; sleep 1h" ]
</span><span class="no">EOF
</span>pod <span class="s2">"hello-apparmor-2"</span> created

<span class="nv">$ </span>kubectl describe pod hello-apparmor-2
Name:          hello-apparmor-2
Namespace:     default
Node:          gke-test-default-pool-239f5d02-x1kf/
Start Time:    Tue, 30 Aug 2016 17:58:56 <span class="nt">-0700</span>
Labels:        &lt;none&gt;
Annotations:   container.apparmor.security.beta.kubernetes.io/hello<span class="o">=</span>localhost/k8s-apparmor-example-allow-write
Status:        Pending
Reason:        AppArmor
Message:       Pod Cannot enforce AppArmor: profile <span class="s2">"k8s-apparmor-example-allow-write"</span> is not loaded
IP:
Controllers:   &lt;none&gt;
Containers:
  hello:
    Container ID:
    Image:     busybox
    Image ID:
    Port:
    Command:
      sh
      <span class="nt">-c</span>
      <span class="nb">echo</span> <span class="s1">'Hello AppArmor!'</span> <span class="o">&amp;&amp;</span> sleep 1h
    State:              Waiting
      Reason:           Blocked
    Ready:              False
    Restart Count:      0
    Environment:        &lt;none&gt;
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-dnz7v <span class="o">(</span>ro<span class="o">)</span>
Conditions:
  Type          Status
  Initialized   True
  Ready         False
  PodScheduled  True
Volumes:
  default-token-dnz7v:
    Type:    Secret <span class="o">(</span>a volume populated by a Secret<span class="o">)</span>
    SecretName:    default-token-dnz7v
    Optional:   <span class="nb">false
</span>QoS Class:      BestEffort
Node-Selectors: &lt;none&gt;
Tolerations:    &lt;none&gt;
Events:
  FirstSeen    LastSeen    Count    From                        SubobjectPath    Type        Reason        Message
  <span class="nt">---------</span>    <span class="nt">--------</span>    <span class="nt">-----</span>    <span class="nt">----</span>                        <span class="nt">-------------</span>    <span class="nt">--------</span>    <span class="nt">------</span>        <span class="nt">-------</span>
  23s          23s         1        <span class="o">{</span>default-scheduler <span class="o">}</span>                         Normal      Scheduled     Successfully assigned hello-apparmor-2 to e2e-test-stclair-minion-group-t1f5
  23s          23s         1        <span class="o">{</span>kubelet e2e-test-stclair-minion-group-t1f5<span class="o">}</span>             Warning        AppArmor    Cannot enforce AppArmor: profile <span class="s2">"k8s-apparmor-example-allow-write"</span> is not loaded
</code></pre></div></div>

<p>Note the pod status is Failed, with a helpful error message: <code class="highlighter-rouge">Pod Cannot enforce AppArmor: profile
"k8s-apparmor-example-allow-write" is not loaded</code>. An event was also recorded with the same message.</p>

<h2 id="administration">Administration</h2>

<h3 id="setting-up-nodes-with-profiles">Setting up nodes with profiles</h3>

<p>Kubernetes does not currently provide any native mechanisms for loading AppArmor profiles onto
nodes. There are lots of ways to setup the profiles though, such as:</p>

<ul>
  <li>Through a <a href="/docs/concepts/workloads/controllers/daemonset/">DaemonSet</a> that runs a Pod on each node to
ensure the correct profiles are loaded. An example implementation can be found
<a href="https://git.k8s.io/contrib/apparmor/loader">here</a>.</li>
  <li>At node initialization time, using your node initialization scripts (e.g. Salt, Ansible, etc.) or
image.</li>
  <li>By copying the profiles to each node and loading them through SSH, as demonstrated in the
<a href="#example">Example</a>.</li>
</ul>

<p>The scheduler is not aware of which profiles are loaded onto which node, so the full set of profiles
must be loaded onto every node.  An alternative approach is to add a node label for each profile (or
class of profiles) on the node, and use a
<a href="/docs/concepts/configuration/assign-pod-node/">node selector</a> to ensure the Pod is run on a
node with the required profile.</p>

<h3 id="restricting-profiles-with-the-podsecuritypolicy">Restricting profiles with the PodSecurityPolicy</h3>

<p>If the PodSecurityPolicy extension is enabled, cluster-wide AppArmor restrictions can be applied. To
enable the PodSecurityPolicy, two flags must be set on the <code class="highlighter-rouge">apiserver</code>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>--admission-control=PodSecurityPolicy[,others...]
--runtime-config=extensions/v1beta1/podsecuritypolicy[,others...]
</code></pre></div></div>

<p>With the extension enabled, the AppArmor options can be specified as annotations on the PodSecurityPolicy:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">apparmor.security.beta.kubernetes.io/defaultProfileName</span><span class="pi">:</span> <span class="s">&lt;profile_ref&gt;</span>
<span class="s">apparmor.security.beta.kubernetes.io/allowedProfileNames</span><span class="pi">:</span> <span class="s">&lt;profile_ref&gt;[,others...]</span>
</code></pre></div></div>

<p>The default profile name option specifies the profile to apply to containers by default when none is
specified. The allowed profile names option specifies a list of profiles that Pod containers are
allowed to be run with. If both options are provided, the default must be allowed. The profiles are
specified in the same format as on containers. See the <a href="#api-reference">API Reference</a> for the full
specification.</p>

<h3 id="disabling-apparmor">Disabling AppArmor</h3>

<p>If you do not want AppArmor to be available on your cluster, it can be disabled by a command-line flag:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>--feature-gates=AppArmor=false
</code></pre></div></div>

<p>When disabled, any Pod that includes an AppArmor profile will fail validation with a “Forbidden”
error. Note that by default docker always enables the “docker-default” profile on non-privileged
pods (if the AppArmor kernel module is enabled), and will continue to do so even if the feature-gate
is disabled. The option to disable AppArmor will be removed when AppArmor graduates to general
availability (GA).</p>

<h3 id="upgrading-to-kubernetes-v14-with-apparmor">Upgrading to Kubernetes v1.4 with AppArmor</h3>

<p>No action is required with respect to AppArmor to upgrade your cluster to v1.4. However, if any
existing pods had an AppArmor annotation, they will not go through validation (or PodSecurityPolicy
admission). If permissive profiles are loaded on the nodes, a malicious user could pre-apply a
permissive profile to escalate the pod privileges above the docker-default. If this is a concern, it
is recommended to scrub the cluster of any pods containing an annotation with
<code class="highlighter-rouge">apparmor.security.beta.kubernetes.io</code>.</p>

<h3 id="upgrade-path-to-general-availability">Upgrade path to General Availability</h3>

<p>When AppArmor is ready to be graduated to general availability (GA), the options currently specified
through annotations will be converted to fields. Supporting all the upgrade and downgrade paths
through the transition is very nuanced, and will be explained in detail when the transition
occurs. We will commit to supporting both fields and annotations for at least 2 releases, and will
explicitly reject the annotations for at least 2 releases after that.</p>

<h2 id="authoring-profiles">Authoring Profiles</h2>

<p>Getting AppArmor profiles specified correctly can be a tricky business. Fortunately there are some
tools to help with that:</p>

<ul>
  <li><code class="highlighter-rouge">aa-genprof</code> and <code class="highlighter-rouge">aa-logprof</code> generate profile rules by monitoring an application’s activity and
logs, and admitting the actions it takes. Further instructions are provided by the
<a href="http://wiki.apparmor.net/index.php/Profiling_with_tools">AppArmor documentation</a>.</li>
  <li><a href="https://github.com/jfrazelle/bane">bane</a> is an AppArmor profile generator for Docker that uses a
simplified profile language.</li>
</ul>

<p>It is recommended to run your application through Docker on a development workstation to generate
the profiles, but there is nothing preventing running the tools on the Kubernetes node where your
Pod is running.</p>

<p>To debug problems with AppArmor, you can check the system logs to see what, specifically, was
denied. AppArmor logs verbose messages to <code class="highlighter-rouge">dmesg</code>, and errors can usually be found in the system
logs or through <code class="highlighter-rouge">journalctl</code>. More information is provided in
<a href="http://wiki.apparmor.net/index.php/AppArmor_Failures">AppArmor failures</a>.</p>

<h2 id="api-reference">API Reference</h2>

<h3 id="pod-annotation">Pod Annotation</h3>

<p>Specifying the profile a container will run with:</p>

<ul>
  <li><strong>key</strong>: <code class="highlighter-rouge">container.apparmor.security.beta.kubernetes.io/&lt;container_name&gt;</code>
Where <code class="highlighter-rouge">&lt;container_name&gt;</code> matches the name of a container in the Pod.
A separate profile can be specified for each container in the Pod.</li>
  <li><strong>value</strong>: a profile reference, described below</li>
</ul>

<h3 id="profile-reference">Profile Reference</h3>

<ul>
  <li><code class="highlighter-rouge">runtime/default</code>: Refers to the default runtime profile.
    <ul>
      <li>Equivalent to not specifying a profile (without a PodSecurityPolicy default), except it still
requires AppArmor to be enabled.</li>
      <li>For Docker, this resolves to the
<a href="https://docs.docker.com/engine/security/apparmor/"><code class="highlighter-rouge">docker-default</code></a> profile for non-privileged
containers, and unconfined (no profile) for privileged containers.</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">localhost/&lt;profile_name&gt;</code>: Refers to a profile loaded on the node (localhost) by name.
    <ul>
      <li>The possible profile names are detailed in the
<a href="http://wiki.apparmor.net/index.php/AppArmor_Core_Policy_Reference#Profile_names_and_attachment_specifications">core policy reference</a>.</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">unconfined</code>: This effectively disables AppArmor on the container.</li>
</ul>

<p>Any other profile reference format is invalid.</p>

<h3 id="podsecuritypolicy-annotations">PodSecurityPolicy Annotations</h3>

<p>Specifying the default profile to apply to containers when none is provided:</p>

<ul>
  <li><strong>key</strong>: <code class="highlighter-rouge">apparmor.security.beta.kubernetes.io/defaultProfileName</code></li>
  <li><strong>value</strong>: a profile reference, described above</li>
</ul>

<p>Specifying the list of profiles Pod containers is allowed to specify:</p>

<ul>
  <li><strong>key</strong>: <code class="highlighter-rouge">apparmor.security.beta.kubernetes.io/allowedProfileNames</code></li>
  <li><strong>value</strong>: a comma-separated list of profile references (described above)
    <ul>
      <li>Although an escaped comma is a legal character in a profile name, it cannot be explicitly
allowed here.</li>
    </ul>
  </li>
</ul>

<h2 id="whats-next">What’s next</h2>

<p>Additional resources:</p>

<ul>
  <li><a href="http://wiki.apparmor.net/index.php/QuickProfileLanguage">Quick guide to the AppArmor profile language</a></li>
  <li><a href="http://wiki.apparmor.net/index.php/ProfileLanguage">AppArmor core policy reference</a></li>
</ul>



        <p><a href=""><img src="https://kubernetes-site.appspot.com/UA-36037335-10/GitHub/docs/tutorials/clusters/apparmor.md?pixel" alt="Analytics" /></a></p>
        
        
        <script type="text/javascript">
            PDRTJS_settings_8345992 = {
                "id" : "8345992",
                "unique_id" : "/docs/tutorials/clusters/apparmor/",
                "title" : "AppArmor",
                "permalink" : "https://kubernetes.io/docs/tutorials/clusters/apparmor/"
            };
            (function(d,c,j){if(!document.getElementById(j)){var pd=d.createElement(c),s;pd.id=j;pd.src=('https:'==document.location.protocol)?'https://polldaddy.com/js/rating/rating.js':'http://i0.poll.fm/js/rating/rating.js';s=document.getElementsByTagName(c)[0];s.parentNode.insertBefore(pd,s);}}(document,'script','pd-rating-js'));
        </script>
        <a href="" onclick="window.open('https://github.com/kubernetes/website/issues/new?title=Issue%20with%20' +
        'k8s.io'+window.location.pathname)" class="button issue">Create an Issue</a>
        
        
          <a href="/editdocs#docs/tutorials/clusters/apparmor.md" class="button issue">Edit this Page</a>
        
    
    </div>
</section>

<footer>
    <main class="light-text">
        <nav>
            <a href="/docs/tutorials/stateless-application/hello-minikube/">Get Started</a>
            <a href="/docs/home/">Documentation</a>
            <a href="http://blog.kubernetes.io/">Blog</a>
            <a href="/partners/">Partners</a>
            <a href="/community/">Community</a>
            <a href="/case-studies/">Case Studies</a>
        </nav>
        <div class="social">
            <div>
                <a href="https://twitter.com/kubernetesio" class="twitter"><span>twitter</span></a>
                <a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
                <a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
            </div>
            <div>
                <a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
                <a href="https://groups.google.com/forum/#!forum/kubernetes-users" class="mailing-list"><span>Mailing List</span></a>
                <a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
            </div>
            <div>
                <a href="/docs/setup/pick-right-solution/" class="button">Get Kubernetes</a>
                <a href="https://github.com/kubernetes/kubernetes" class="button">Contribute</a>
            </div>
        </div>
        <div id="miceType" class="center">
            &copy; 2018 The Kubernetes Authors | Documentation Distributed under <a href="https://git.k8s.io/website/LICENSE" class="light-text">CC BY 4.0</a>
        </div>
        <div id="miceType" class="center">
            Copyright &copy; 2018 The Linux Foundation&reg;. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage" class="light-text">Trademark Usage page</a>
        </div>
    </main>
</footer>

<button class="flyout-button" onclick="kub.toggleToc()"></button>

<style>
.cse .gsc-control-cse, .gsc-control-cse, {
    padding: 0;
}
  .gsc-control-cse table, .gsc-control-cse-en table {
      margin:0px !important;
  }
  .gsc-above-wrapper-area {
      border-bottom: 0;
  }
</style>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-36037335-10', 'auto');
ga('send', 'pageview');

// hide docs nav area if no nav is present, or if nav only contains a link to the current page
(function () {
    window.addEventListener('DOMContentLoaded', init)

        // play nice with our neighbors
        function init() {
            window.removeEventListener('DOMContentLoaded', init)
                hideNav()
        }

    function hideNav(toc){
        if (!toc) toc = document.querySelector('#docsToc')
        if (!toc) return
            var container = toc.querySelector('.container')

                // container is built dynamically, so it may not be present on the first runloop
                if (container) {
                    if (container.childElementCount === 0 || toc.querySelectorAll('a.item').length === 1) {
                        toc.style.display = 'none'
                            document.getElementById('docsContent').style.width = '100%'
                    }
                } else {
                    requestAnimationFrame(function () {
                        hideNav(toc)
                    })
                }
    }
})();
</script>

<!-- Commenting out AnswerDash for now; we need to work on our list of questions/answers/design first
    <!-- Start of AnswerDash script <script>var AnswerDash;!function(e,t,n,s,a){if(!t.getElementById(s)){var i,r=t.createElement(n),c=t.getElementsByTagName(n)[0];e[a]||(i=e[a]=function(){i.__oninit.push(arguments)},i.__oninit=[]),r.type="text/javascript",r.async=!0,r.src="https://p1.answerdash.com/answerdash.min.js?siteid=756",r.setAttribute("id",s),c.parentNode.insertBefore(r,c)}}(window,document,"script","answerdash-script","AnswerDash");</script> <!-- End of AnswerDash script -->


</body>
</html>
